<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>libmesh解析: libMesh::SparsityPattern::Build类 参考</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libmesh解析
   </div>
   <div id="projectbrief">本工作只是尝试解析原libmesh的代码,供学习使用</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'搜索');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>首页</span></a></li>
      <li class="current"><a href="annotated.html"><span>类</span></a></li>
      <li><a href="files.html"><span>文件</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="搜索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>类列表</span></a></li>
      <li><a href="classes.html"><span>类索引</span></a></li>
      <li><a href="inherits.html"><span>类继承关系</span></a></li>
      <li><a href="functions.html"><span>类成员</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>全部</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>类</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>命名空间</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>文件</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>函数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>变量</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>类型定义</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>枚举</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>枚举值</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>友元</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>页</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacelibMesh.html">libMesh</a></li><li class="navelem"><a class="el" href="namespacelibMesh_1_1SparsityPattern.html">SparsityPattern</a></li><li class="navelem"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html">Build</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public 成员函数</a> &#124;
<a href="#pri-methods">Private 成员函数</a> &#124;
<a href="#pri-attribs">Private 属性</a> &#124;
<a href="classlibMesh_1_1SparsityPattern_1_1Build-members.html">所有成员列表</a>  </div>
  <div class="headertitle">
<div class="title">libMesh::SparsityPattern::Build类 参考</div>  </div>
</div><!--header-->
<div class="contents">

<p>This helper class can be called on multiple threads to compute the sparsity pattern (or graph) of the sparse matrix resulting from the discretization.  
 <a href="classlibMesh_1_1SparsityPattern_1_1Build.html#details">更多...</a></p>

<p><code>#include &lt;<a class="el" href="sparsity__pattern_8h_source.html">sparsity_pattern.h</a>&gt;</code></p>
<div class="dynheader">
类 libMesh::SparsityPattern::Build 继承关系图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classlibMesh_1_1SparsityPattern_1_1Build__inherit__graph.svg" width="191" height="127"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
<center><span class="legend">[<a href="graph_legend.html">图例</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public 成员函数</h2></td></tr>
<tr class="memitem:ad03cbf54aa9d9897a2a8b33180c003a2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#ad03cbf54aa9d9897a2a8b33180c003a2">Build</a> (const <a class="el" href="classlibMesh_1_1DofMap.html">DofMap</a> &amp;dof_map_in, const CouplingMatrix *dof_coupling_in, const std::set&lt; GhostingFunctor * &gt; &amp;coupling_functors_in, const bool implicit_neighbor_dofs_in, const bool need_full_sparsity_pattern_in, const bool calculate_constrained_in=false)</td></tr>
<tr class="separator:ad03cbf54aa9d9897a2a8b33180c003a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaec769406376f95e33b3a2bbbaaf5ba8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#aaec769406376f95e33b3a2bbbaaf5ba8">Build</a> (const <a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html">Build</a> &amp;)=default</td></tr>
<tr class="memdesc:aaec769406376f95e33b3a2bbbaaf5ba8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Special functions.  <a href="#aaec769406376f95e33b3a2bbbaaf5ba8">更多...</a><br/></td></tr>
<tr class="separator:aaec769406376f95e33b3a2bbbaaf5ba8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8cb7467519617fcc0f3cbbdff3a4ce0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html">Build</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#ae8cb7467519617fcc0f3cbbdff3a4ce0">operator=</a> (const <a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html">Build</a> &amp;)=delete</td></tr>
<tr class="separator:ae8cb7467519617fcc0f3cbbdff3a4ce0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21212e85794b9c3edbe3866bfdd00d64"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a21212e85794b9c3edbe3866bfdd00d64">Build</a> (<a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html">Build</a> &amp;&amp;)=default</td></tr>
<tr class="separator:a21212e85794b9c3edbe3866bfdd00d64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1a0805d900e241f0cb3987dfe2a3c58"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html">Build</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af1a0805d900e241f0cb3987dfe2a3c58">operator=</a> (<a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html">Build</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:af1a0805d900e241f0cb3987dfe2a3c58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ebc2b1f48785c50fd28c78692884ca5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a0ebc2b1f48785c50fd28c78692884ca5">~Build</a> ()=default</td></tr>
<tr class="separator:a0ebc2b1f48785c50fd28c78692884ca5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a532b3f84dbe671badabb7ec2f1ed6631"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a532b3f84dbe671badabb7ec2f1ed6631">Build</a> (<a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html">Build</a> &amp;other, Threads::split)</td></tr>
<tr class="memdesc:a532b3f84dbe671badabb7ec2f1ed6631"><td class="mdescLeft">&#160;</td><td class="mdescRight">Splitting constructor, for use in multithreaded loops.  <a href="#a532b3f84dbe671badabb7ec2f1ed6631">更多...</a><br/></td></tr>
<tr class="separator:a532b3f84dbe671badabb7ec2f1ed6631"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc76917e49e35f190ee11ca95d319db8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#acc76917e49e35f190ee11ca95d319db8">operator()</a> (const ConstElemRange &amp;range)</td></tr>
<tr class="memdesc:acc76917e49e35f190ee11ca95d319db8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add entries from a range of elements to this object's sparsity pattern.  <a href="#acc76917e49e35f190ee11ca95d319db8">更多...</a><br/></td></tr>
<tr class="separator:acc76917e49e35f190ee11ca95d319db8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a76acc8f8e9997d9572957695835302"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a0a76acc8f8e9997d9572957695835302">join</a> (const <a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html">Build</a> &amp;other)</td></tr>
<tr class="memdesc:a0a76acc8f8e9997d9572957695835302"><td class="mdescLeft">&#160;</td><td class="mdescRight">Combine the sparsity pattern in <code>other</code> with this object's sparsity pattern.  <a href="#a0a76acc8f8e9997d9572957695835302">更多...</a><br/></td></tr>
<tr class="separator:a0a76acc8f8e9997d9572957695835302"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a823ca5ea6a3f2ffebb568815cd51c63c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a823ca5ea6a3f2ffebb568815cd51c63c">parallel_sync</a> ()</td></tr>
<tr class="memdesc:a823ca5ea6a3f2ffebb568815cd51c63c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send sparsity pattern data relevant to other processors to those processors, and receive and incorporate data relevant to us.  <a href="#a823ca5ea6a3f2ffebb568815cd51c63c">更多...</a><br/></td></tr>
<tr class="separator:a823ca5ea6a3f2ffebb568815cd51c63c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7849811fdb1b4272b400cebb96966be7"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classlibMesh_1_1SparsityPattern_1_1Graph.html">SparsityPattern::Graph</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a7849811fdb1b4272b400cebb96966be7">get_sparsity_pattern</a> () const </td></tr>
<tr class="memdesc:a7849811fdb1b4272b400cebb96966be7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rows of sparse matrix indices, indexed by the offset from the first DoF on this processor.  <a href="#a7849811fdb1b4272b400cebb96966be7">更多...</a><br/></td></tr>
<tr class="separator:a7849811fdb1b4272b400cebb96966be7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8cfeea16684fc12a602e2bb08ebbe60"><td class="memItemLeft" align="right" valign="top">const <br class="typebreak"/>
<a class="el" href="classlibMesh_1_1SparsityPattern_1_1NonlocalGraph.html">SparsityPattern::NonlocalGraph</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af8cfeea16684fc12a602e2bb08ebbe60">get_nonlocal_pattern</a> () const </td></tr>
<tr class="memdesc:af8cfeea16684fc12a602e2bb08ebbe60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rows of sparse matrix indices, mapped from global DoF number, which belong on other processors.  <a href="#af8cfeea16684fc12a602e2bb08ebbe60">更多...</a><br/></td></tr>
<tr class="separator:af8cfeea16684fc12a602e2bb08ebbe60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98fea5ead422506cedb5796f1c587ea1"><td class="memItemLeft" align="right" valign="top">const std::vector&lt; <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a98fea5ead422506cedb5796f1c587ea1">get_n_nz</a> () const </td></tr>
<tr class="memdesc:a98fea5ead422506cedb5796f1c587ea1"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of on-processor nonzeros in my portion of the global matrix.  <a href="#a98fea5ead422506cedb5796f1c587ea1">更多...</a><br/></td></tr>
<tr class="separator:a98fea5ead422506cedb5796f1c587ea1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a034d74e370f8ba52a5f0ace50788b61d"><td class="memItemLeft" align="right" valign="top">const std::vector&lt; <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a034d74e370f8ba52a5f0ace50788b61d">get_n_oz</a> () const </td></tr>
<tr class="memdesc:a034d74e370f8ba52a5f0ace50788b61d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of off-processor nonzeros in my portion of the global matrix.  <a href="#a034d74e370f8ba52a5f0ace50788b61d">更多...</a><br/></td></tr>
<tr class="separator:a034d74e370f8ba52a5f0ace50788b61d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5242d19701673c39a07c7c9d74ef76ac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a5242d19701673c39a07c7c9d74ef76ac">apply_extra_sparsity_object</a> (<a class="el" href="classlibMesh_1_1SparsityPattern_1_1AugmentSparsityPattern.html">SparsityPattern::AugmentSparsityPattern</a> &amp;asp)</td></tr>
<tr class="memdesc:a5242d19701673c39a07c7c9d74ef76ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Let a user-provided <a class="el" href="classlibMesh_1_1SparsityPattern_1_1AugmentSparsityPattern.html" title="Abstract base class to be used to add user-defined implicit degree of freedom couplings. ">AugmentSparsityPattern</a> subclass modify our sparsity structure.  <a href="#a5242d19701673c39a07c7c9d74ef76ac">更多...</a><br/></td></tr>
<tr class="separator:a5242d19701673c39a07c7c9d74ef76ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d2706adc70ca3747e3429dcb395c828"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a6d2706adc70ca3747e3429dcb395c828">apply_extra_sparsity_function</a> (void(*func)(<a class="el" href="classlibMesh_1_1SparsityPattern_1_1Graph.html">SparsityPattern::Graph</a> &amp;sparsity, std::vector&lt; <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> &gt; &amp;<a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#abd98a4e05536e03e6d1281c8ceee0f7d">n_nz</a>, std::vector&lt; <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> &gt; &amp;<a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af7805e48c78b15d9df8c618dd593a3bb">n_oz</a>, void *context), void *context)</td></tr>
<tr class="memdesc:a6d2706adc70ca3747e3429dcb395c828"><td class="mdescLeft">&#160;</td><td class="mdescRight">Let a user-provided function modify our sparsity structure.  <a href="#a6d2706adc70ca3747e3429dcb395c828">更多...</a><br/></td></tr>
<tr class="separator:a6d2706adc70ca3747e3429dcb395c828"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8d23df7aec15fd454e39f97297f4ba1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#aa8d23df7aec15fd454e39f97297f4ba1">clear_full_sparsity</a> ()</td></tr>
<tr class="memdesc:aa8d23df7aec15fd454e39f97297f4ba1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear the "full" details of our sparsity structure, leaving only the counts of non-zero entries.  <a href="#aa8d23df7aec15fd454e39f97297f4ba1">更多...</a><br/></td></tr>
<tr class="separator:aa8d23df7aec15fd454e39f97297f4ba1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private 成员函数</h2></td></tr>
<tr class="memitem:a99a71efbf51337a5b67893b45e98cb7d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a99a71efbf51337a5b67893b45e98cb7d">handle_vi_vj</a> (const std::vector&lt; <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> &gt; &amp;element_dofs_i, const std::vector&lt; <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> &gt; &amp;element_dofs_j)</td></tr>
<tr class="separator:a99a71efbf51337a5b67893b45e98cb7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6a369d62cc83a1003e315cf178c9daa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af6a369d62cc83a1003e315cf178c9daa">sorted_connected_dofs</a> (const Elem *elem, std::vector&lt; <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> &gt; &amp;dofs_vi, unsigned int vi)</td></tr>
<tr class="separator:af6a369d62cc83a1003e315cf178c9daa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private 属性</h2></td></tr>
<tr class="memitem:adaaeb1039af971d4376bcd896686a281"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classlibMesh_1_1DofMap.html">DofMap</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">dof_map</a></td></tr>
<tr class="separator:adaaeb1039af971d4376bcd896686a281"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e288ac68552ad57f0b56c9feff455b2"><td class="memItemLeft" align="right" valign="top">const CouplingMatrix *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a7e288ac68552ad57f0b56c9feff455b2">dof_coupling</a></td></tr>
<tr class="separator:a7e288ac68552ad57f0b56c9feff455b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b7e6659e67ebde9374eafc99f4eaf42"><td class="memItemLeft" align="right" valign="top">const std::set<br class="typebreak"/>
&lt; GhostingFunctor * &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a7b7e6659e67ebde9374eafc99f4eaf42">coupling_functors</a></td></tr>
<tr class="separator:a7b7e6659e67ebde9374eafc99f4eaf42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65ae2307529ece863ce1092155185762"><td class="memItemLeft" align="right" valign="top">const bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a65ae2307529ece863ce1092155185762">implicit_neighbor_dofs</a></td></tr>
<tr class="separator:a65ae2307529ece863ce1092155185762"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af61ba6f3d2d45a3cfacb0d32b4bfe428"><td class="memItemLeft" align="right" valign="top">const bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af61ba6f3d2d45a3cfacb0d32b4bfe428">need_full_sparsity_pattern</a></td></tr>
<tr class="separator:af61ba6f3d2d45a3cfacb0d32b4bfe428"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94ab4956b00a065363ff5b52f447c754"><td class="memItemLeft" align="right" valign="top">const bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a94ab4956b00a065363ff5b52f447c754">calculate_constrained</a></td></tr>
<tr class="separator:a94ab4956b00a065363ff5b52f447c754"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fb9ad8334bf9313a8ad9231e64724f2"><td class="memItemLeft" align="right" valign="top">std::unordered_set&lt; <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a2fb9ad8334bf9313a8ad9231e64724f2">hashed_dof_sets</a></td></tr>
<tr class="separator:a2fb9ad8334bf9313a8ad9231e64724f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a054aa3bf4ab1ff21352e2aaf2495c589"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Graph.html">SparsityPattern::Graph</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a054aa3bf4ab1ff21352e2aaf2495c589">sparsity_pattern</a></td></tr>
<tr class="separator:a054aa3bf4ab1ff21352e2aaf2495c589"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9a6ba8ebda480adf92983c4a7d0711c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1NonlocalGraph.html">SparsityPattern::NonlocalGraph</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#ae9a6ba8ebda480adf92983c4a7d0711c">nonlocal_pattern</a></td></tr>
<tr class="separator:ae9a6ba8ebda480adf92983c4a7d0711c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd98a4e05536e03e6d1281c8ceee0f7d"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#abd98a4e05536e03e6d1281c8ceee0f7d">n_nz</a></td></tr>
<tr class="separator:abd98a4e05536e03e6d1281c8ceee0f7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7805e48c78b15d9df8c618dd593a3bb"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af7805e48c78b15d9df8c618dd593a3bb">n_oz</a></td></tr>
<tr class="separator:af7805e48c78b15d9df8c618dd593a3bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">详细描述</h2>
<div class="textblock"><p>This helper class can be called on multiple threads to compute the sparsity pattern (or graph) of the sparse matrix resulting from the discretization. </p>
<p>This pattern may be used directly by a particular sparse matrix format (e.g. <code><a class="el" href="classlibMesh_1_1LaspackMatrix.html" title="LaspackMatrix类封装了Laspack库中的QMatrix对象。 目前，Laspack仅支持实数数据类型，因此这个类是对 SparseMatrix&lt;T&gt; 的全特化，其中 T = Real。 所...">LaspackMatrix</a></code>) or indirectly (e.g. <code><a class="el" href="classlibMesh_1_1PetscMatrix.html" title="这个类提供了一个方便的接口，用于操作并行稀疏矩阵的 PETSc C 库数据结构。 所有覆盖的虚拟函数都在 sparse_matrix.h 中有详细的文档说明。 ">PetscMatrix</a></code>). In the latter case the number of nonzeros per row of the matrix is needed for efficient preallocation. In this case it suffices to provide estimate (but bounding) values, and in this case the threaded method can take some short-cuts for efficiency. </p>

<p>在文件 <a class="el" href="sparsity__pattern_8h_source.html">sparsity_pattern.h</a> 第 <a class="el" href="sparsity__pattern_8h_source.html#l00102">102</a> 行定义.</p>
</div><h2 class="groupheader">构造及析构函数说明</h2>
<a class="anchor" id="ad03cbf54aa9d9897a2a8b33180c003a2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">libMesh::SparsityPattern::Build::Build </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classlibMesh_1_1DofMap.html">DofMap</a> &amp;&#160;</td>
          <td class="paramname"><em>dof_map_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const CouplingMatrix *&#160;</td>
          <td class="paramname"><em>dof_coupling_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::set&lt; GhostingFunctor * &gt; &amp;&#160;</td>
          <td class="paramname"><em>coupling_functors_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>implicit_neighbor_dofs_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>need_full_sparsity_pattern_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>calculate_constrained_in</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>在文件 <a class="el" href="sparsity__pattern_8C_source.html">sparsity_pattern.C</a> 第 <a class="el" href="sparsity__pattern_8C_source.html#l00046">46</a> 行定义.</p>
<div class="fragment"><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;                                                   :</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  ParallelObject(dof_map_in),</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">dof_map</a>(dof_map_in),</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a7e288ac68552ad57f0b56c9feff455b2">dof_coupling</a>(dof_coupling_in),</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a7b7e6659e67ebde9374eafc99f4eaf42">coupling_functors</a>(coupling_functors_in),</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a65ae2307529ece863ce1092155185762">implicit_neighbor_dofs</a>(implicit_neighbor_dofs_in),</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af61ba6f3d2d45a3cfacb0d32b4bfe428">need_full_sparsity_pattern</a>(need_full_sparsity_pattern_in),</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a94ab4956b00a065363ff5b52f447c754">calculate_constrained</a>(calculate_constrained_in),</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a054aa3bf4ab1ff21352e2aaf2495c589">sparsity_pattern</a>(),</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#ae9a6ba8ebda480adf92983c4a7d0711c">nonlocal_pattern</a>(),</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#abd98a4e05536e03e6d1281c8ceee0f7d">n_nz</a>(),</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af7805e48c78b15d9df8c618dd593a3bb">n_oz</a>()</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;{}</div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_a054aa3bf4ab1ff21352e2aaf2495c589"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#a054aa3bf4ab1ff21352e2aaf2495c589">libMesh::SparsityPattern::Build::sparsity_pattern</a></div><div class="ttdeci">SparsityPattern::Graph sparsity_pattern</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00231">sparsity_pattern.h:231</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_a7b7e6659e67ebde9374eafc99f4eaf42"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#a7b7e6659e67ebde9374eafc99f4eaf42">libMesh::SparsityPattern::Build::coupling_functors</a></div><div class="ttdeci">const std::set&lt; GhostingFunctor * &gt; &amp; coupling_functors</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00204">sparsity_pattern.h:204</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_a94ab4956b00a065363ff5b52f447c754"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#a94ab4956b00a065363ff5b52f447c754">libMesh::SparsityPattern::Build::calculate_constrained</a></div><div class="ttdeci">const bool calculate_constrained</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00207">sparsity_pattern.h:207</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_a65ae2307529ece863ce1092155185762"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#a65ae2307529ece863ce1092155185762">libMesh::SparsityPattern::Build::implicit_neighbor_dofs</a></div><div class="ttdeci">const bool implicit_neighbor_dofs</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00205">sparsity_pattern.h:205</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_af61ba6f3d2d45a3cfacb0d32b4bfe428"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#af61ba6f3d2d45a3cfacb0d32b4bfe428">libMesh::SparsityPattern::Build::need_full_sparsity_pattern</a></div><div class="ttdeci">const bool need_full_sparsity_pattern</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00206">sparsity_pattern.h:206</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_adaaeb1039af971d4376bcd896686a281"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">libMesh::SparsityPattern::Build::dof_map</a></div><div class="ttdeci">const DofMap &amp; dof_map</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00202">sparsity_pattern.h:202</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_a7e288ac68552ad57f0b56c9feff455b2"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#a7e288ac68552ad57f0b56c9feff455b2">libMesh::SparsityPattern::Build::dof_coupling</a></div><div class="ttdeci">const CouplingMatrix * dof_coupling</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00203">sparsity_pattern.h:203</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_abd98a4e05536e03e6d1281c8ceee0f7d"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#abd98a4e05536e03e6d1281c8ceee0f7d">libMesh::SparsityPattern::Build::n_nz</a></div><div class="ttdeci">std::vector&lt; dof_id_type &gt; n_nz</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00235">sparsity_pattern.h:235</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_ae9a6ba8ebda480adf92983c4a7d0711c"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#ae9a6ba8ebda480adf92983c4a7d0711c">libMesh::SparsityPattern::Build::nonlocal_pattern</a></div><div class="ttdeci">SparsityPattern::NonlocalGraph nonlocal_pattern</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00233">sparsity_pattern.h:233</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_af7805e48c78b15d9df8c618dd593a3bb"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#af7805e48c78b15d9df8c618dd593a3bb">libMesh::SparsityPattern::Build::n_oz</a></div><div class="ttdeci">std::vector&lt; dof_id_type &gt; n_oz</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00237">sparsity_pattern.h:237</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aaec769406376f95e33b3a2bbbaaf5ba8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">libMesh::SparsityPattern::Build::Build </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html">Build</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Special functions. </p>
<ul>
<li>The <a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html" title="This helper class can be called on multiple threads to compute the sparsity pattern (or graph) of the...">Build</a> object holds references to <a class="el" href="classlibMesh_1_1DofMap.html" title="This class handles the numbering of degrees of freedom on a mesh. ">DofMap</a> and coupling functors, therefore it can't be assigned. </li>
</ul>

</div>
</div>
<a class="anchor" id="a21212e85794b9c3edbe3866bfdd00d64"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">libMesh::SparsityPattern::Build::Build </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html">Build</a> &amp;&amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a0ebc2b1f48785c50fd28c78692884ca5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">libMesh::SparsityPattern::Build::~Build </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a532b3f84dbe671badabb7ec2f1ed6631"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">libMesh::SparsityPattern::Build::Build </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html">Build</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Threads::split&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Splitting constructor, for use in multithreaded loops. </p>

<p>在文件 <a class="el" href="sparsity__pattern_8C_source.html">sparsity_pattern.C</a> 第 <a class="el" href="sparsity__pattern_8C_source.html#l00067">67</a> 行定义.</p>
<div class="fragment"><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                                         :</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  ParallelObject(other),</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">dof_map</a>(other.dof_map),</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a7e288ac68552ad57f0b56c9feff455b2">dof_coupling</a>(other.dof_coupling),</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a7b7e6659e67ebde9374eafc99f4eaf42">coupling_functors</a>(other.coupling_functors),</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a65ae2307529ece863ce1092155185762">implicit_neighbor_dofs</a>(other.implicit_neighbor_dofs),</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af61ba6f3d2d45a3cfacb0d32b4bfe428">need_full_sparsity_pattern</a>(other.need_full_sparsity_pattern),</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a94ab4956b00a065363ff5b52f447c754">calculate_constrained</a>(other.calculate_constrained),</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a2fb9ad8334bf9313a8ad9231e64724f2">hashed_dof_sets</a>(other.hashed_dof_sets),</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a054aa3bf4ab1ff21352e2aaf2495c589">sparsity_pattern</a>(),</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#ae9a6ba8ebda480adf92983c4a7d0711c">nonlocal_pattern</a>(),</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#abd98a4e05536e03e6d1281c8ceee0f7d">n_nz</a>(),</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af7805e48c78b15d9df8c618dd593a3bb">n_oz</a>()</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;{}</div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_a054aa3bf4ab1ff21352e2aaf2495c589"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#a054aa3bf4ab1ff21352e2aaf2495c589">libMesh::SparsityPattern::Build::sparsity_pattern</a></div><div class="ttdeci">SparsityPattern::Graph sparsity_pattern</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00231">sparsity_pattern.h:231</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_a7b7e6659e67ebde9374eafc99f4eaf42"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#a7b7e6659e67ebde9374eafc99f4eaf42">libMesh::SparsityPattern::Build::coupling_functors</a></div><div class="ttdeci">const std::set&lt; GhostingFunctor * &gt; &amp; coupling_functors</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00204">sparsity_pattern.h:204</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_a94ab4956b00a065363ff5b52f447c754"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#a94ab4956b00a065363ff5b52f447c754">libMesh::SparsityPattern::Build::calculate_constrained</a></div><div class="ttdeci">const bool calculate_constrained</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00207">sparsity_pattern.h:207</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_a65ae2307529ece863ce1092155185762"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#a65ae2307529ece863ce1092155185762">libMesh::SparsityPattern::Build::implicit_neighbor_dofs</a></div><div class="ttdeci">const bool implicit_neighbor_dofs</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00205">sparsity_pattern.h:205</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_af61ba6f3d2d45a3cfacb0d32b4bfe428"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#af61ba6f3d2d45a3cfacb0d32b4bfe428">libMesh::SparsityPattern::Build::need_full_sparsity_pattern</a></div><div class="ttdeci">const bool need_full_sparsity_pattern</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00206">sparsity_pattern.h:206</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_a2fb9ad8334bf9313a8ad9231e64724f2"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#a2fb9ad8334bf9313a8ad9231e64724f2">libMesh::SparsityPattern::Build::hashed_dof_sets</a></div><div class="ttdeci">std::unordered_set&lt; dof_id_type &gt; hashed_dof_sets</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00218">sparsity_pattern.h:218</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_adaaeb1039af971d4376bcd896686a281"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">libMesh::SparsityPattern::Build::dof_map</a></div><div class="ttdeci">const DofMap &amp; dof_map</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00202">sparsity_pattern.h:202</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_a7e288ac68552ad57f0b56c9feff455b2"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#a7e288ac68552ad57f0b56c9feff455b2">libMesh::SparsityPattern::Build::dof_coupling</a></div><div class="ttdeci">const CouplingMatrix * dof_coupling</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00203">sparsity_pattern.h:203</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_abd98a4e05536e03e6d1281c8ceee0f7d"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#abd98a4e05536e03e6d1281c8ceee0f7d">libMesh::SparsityPattern::Build::n_nz</a></div><div class="ttdeci">std::vector&lt; dof_id_type &gt; n_nz</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00235">sparsity_pattern.h:235</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_ae9a6ba8ebda480adf92983c4a7d0711c"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#ae9a6ba8ebda480adf92983c4a7d0711c">libMesh::SparsityPattern::Build::nonlocal_pattern</a></div><div class="ttdeci">SparsityPattern::NonlocalGraph nonlocal_pattern</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00233">sparsity_pattern.h:233</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_af7805e48c78b15d9df8c618dd593a3bb"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#af7805e48c78b15d9df8c618dd593a3bb">libMesh::SparsityPattern::Build::n_oz</a></div><div class="ttdeci">std::vector&lt; dof_id_type &gt; n_oz</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00237">sparsity_pattern.h:237</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">成员函数说明</h2>
<a class="anchor" id="a6d2706adc70ca3747e3429dcb395c828"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void libMesh::SparsityPattern::Build::apply_extra_sparsity_function </td>
          <td>(</td>
          <td class="paramtype">void(*)(<a class="el" href="classlibMesh_1_1SparsityPattern_1_1Graph.html">SparsityPattern::Graph</a> &amp;sparsity, std::vector&lt; <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> &gt; &amp;<a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#abd98a4e05536e03e6d1281c8ceee0f7d">n_nz</a>, std::vector&lt; <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> &gt; &amp;<a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af7805e48c78b15d9df8c618dd593a3bb">n_oz</a>, void *context)&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Let a user-provided function modify our sparsity structure. </p>

<p>在文件 <a class="el" href="sparsity__pattern_8h_source.html">sparsity_pattern.h</a> 第 <a class="el" href="sparsity__pattern_8h_source.html#l00184">184</a> 行定义.</p>

<p>参考 <a class="el" href="sparsity__pattern_8h_source.html#l00231">sparsity_pattern</a>.</p>
<div class="fragment"><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  { func(<a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a054aa3bf4ab1ff21352e2aaf2495c589">sparsity_pattern</a>, <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#abd98a4e05536e03e6d1281c8ceee0f7d">n_nz</a>, <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af7805e48c78b15d9df8c618dd593a3bb">n_oz</a>, context); }</div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_a054aa3bf4ab1ff21352e2aaf2495c589"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#a054aa3bf4ab1ff21352e2aaf2495c589">libMesh::SparsityPattern::Build::sparsity_pattern</a></div><div class="ttdeci">SparsityPattern::Graph sparsity_pattern</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00231">sparsity_pattern.h:231</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_abd98a4e05536e03e6d1281c8ceee0f7d"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#abd98a4e05536e03e6d1281c8ceee0f7d">libMesh::SparsityPattern::Build::n_nz</a></div><div class="ttdeci">std::vector&lt; dof_id_type &gt; n_nz</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00235">sparsity_pattern.h:235</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_af7805e48c78b15d9df8c618dd593a3bb"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#af7805e48c78b15d9df8c618dd593a3bb">libMesh::SparsityPattern::Build::n_oz</a></div><div class="ttdeci">std::vector&lt; dof_id_type &gt; n_oz</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00237">sparsity_pattern.h:237</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5242d19701673c39a07c7c9d74ef76ac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void libMesh::SparsityPattern::Build::apply_extra_sparsity_object </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1AugmentSparsityPattern.html">SparsityPattern::AugmentSparsityPattern</a> &amp;&#160;</td>
          <td class="paramname"><em>asp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Let a user-provided <a class="el" href="classlibMesh_1_1SparsityPattern_1_1AugmentSparsityPattern.html" title="Abstract base class to be used to add user-defined implicit degree of freedom couplings. ">AugmentSparsityPattern</a> subclass modify our sparsity structure. </p>

<p>在文件 <a class="el" href="sparsity__pattern_8C_source.html">sparsity_pattern.C</a> 第 <a class="el" href="sparsity__pattern_8C_source.html#l00602">602</a> 行定义.</p>

<p>参考 <a class="el" href="classlibMesh_1_1SparsityPattern_1_1AugmentSparsityPattern.html#a5a7dbf85b61257fc8c4dbb1b3a84ac70">libMesh::SparsityPattern::AugmentSparsityPattern::augment_sparsity_pattern()</a>, <a class="el" href="sparsity__pattern_8h_source.html#l00235">n_nz</a>, <a class="el" href="sparsity__pattern_8h_source.html#l00237">n_oz</a> , 以及 <a class="el" href="sparsity__pattern_8h_source.html#l00231">sparsity_pattern</a>.</p>
<div class="fragment"><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;{</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  asp.augment_sparsity_pattern (<a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a054aa3bf4ab1ff21352e2aaf2495c589">sparsity_pattern</a>, <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#abd98a4e05536e03e6d1281c8ceee0f7d">n_nz</a>, <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af7805e48c78b15d9df8c618dd593a3bb">n_oz</a>);</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;}</div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_a054aa3bf4ab1ff21352e2aaf2495c589"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#a054aa3bf4ab1ff21352e2aaf2495c589">libMesh::SparsityPattern::Build::sparsity_pattern</a></div><div class="ttdeci">SparsityPattern::Graph sparsity_pattern</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00231">sparsity_pattern.h:231</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_abd98a4e05536e03e6d1281c8ceee0f7d"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#abd98a4e05536e03e6d1281c8ceee0f7d">libMesh::SparsityPattern::Build::n_nz</a></div><div class="ttdeci">std::vector&lt; dof_id_type &gt; n_nz</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00235">sparsity_pattern.h:235</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_af7805e48c78b15d9df8c618dd593a3bb"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#af7805e48c78b15d9df8c618dd593a3bb">libMesh::SparsityPattern::Build::n_oz</a></div><div class="ttdeci">std::vector&lt; dof_id_type &gt; n_oz</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00237">sparsity_pattern.h:237</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa8d23df7aec15fd454e39f97297f4ba1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void libMesh::SparsityPattern::Build::clear_full_sparsity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clear the "full" details of our sparsity structure, leaving only the counts of non-zero entries. </p>

<p>在文件 <a class="el" href="sparsity__pattern_8h_source.html">sparsity_pattern.h</a> 第 <a class="el" href="sparsity__pattern_8h_source.html#l00195">195</a> 行定义.</p>

<p>参考 <a class="el" href="sparsity__pattern_8h_source.html#l00233">nonlocal_pattern</a> , 以及 <a class="el" href="sparsity__pattern_8h_source.html#l00231">sparsity_pattern</a>.</p>
<div class="fragment"><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a054aa3bf4ab1ff21352e2aaf2495c589">sparsity_pattern</a>.clear();</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#ae9a6ba8ebda480adf92983c4a7d0711c">nonlocal_pattern</a>.clear();</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  }</div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_a054aa3bf4ab1ff21352e2aaf2495c589"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#a054aa3bf4ab1ff21352e2aaf2495c589">libMesh::SparsityPattern::Build::sparsity_pattern</a></div><div class="ttdeci">SparsityPattern::Graph sparsity_pattern</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00231">sparsity_pattern.h:231</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_ae9a6ba8ebda480adf92983c4a7d0711c"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#ae9a6ba8ebda480adf92983c4a7d0711c">libMesh::SparsityPattern::Build::nonlocal_pattern</a></div><div class="ttdeci">SparsityPattern::NonlocalGraph nonlocal_pattern</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00233">sparsity_pattern.h:233</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a98fea5ead422506cedb5796f1c587ea1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::vector&lt;<a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a>&gt;&amp; libMesh::SparsityPattern::Build::get_n_nz </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The number of on-processor nonzeros in my portion of the global matrix. </p>

<p>在文件 <a class="el" href="sparsity__pattern_8h_source.html">sparsity_pattern.h</a> 第 <a class="el" href="sparsity__pattern_8h_source.html#l00165">165</a> 行定义.</p>

<p>参考 <a class="el" href="sparsity__pattern_8h_source.html#l00235">n_nz</a>.</p>
<div class="fragment"><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  { <span class="keywordflow">return</span> <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#abd98a4e05536e03e6d1281c8ceee0f7d">n_nz</a>; }</div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_abd98a4e05536e03e6d1281c8ceee0f7d"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#abd98a4e05536e03e6d1281c8ceee0f7d">libMesh::SparsityPattern::Build::n_nz</a></div><div class="ttdeci">std::vector&lt; dof_id_type &gt; n_nz</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00235">sparsity_pattern.h:235</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a034d74e370f8ba52a5f0ace50788b61d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::vector&lt;<a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a>&gt;&amp; libMesh::SparsityPattern::Build::get_n_oz </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The number of off-processor nonzeros in my portion of the global matrix. </p>

<p>在文件 <a class="el" href="sparsity__pattern_8h_source.html">sparsity_pattern.h</a> 第 <a class="el" href="sparsity__pattern_8h_source.html#l00172">172</a> 行定义.</p>

<p>参考 <a class="el" href="sparsity__pattern_8h_source.html#l00237">n_oz</a>.</p>
<div class="fragment"><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  { <span class="keywordflow">return</span> <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af7805e48c78b15d9df8c618dd593a3bb">n_oz</a>; }</div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_af7805e48c78b15d9df8c618dd593a3bb"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#af7805e48c78b15d9df8c618dd593a3bb">libMesh::SparsityPattern::Build::n_oz</a></div><div class="ttdeci">std::vector&lt; dof_id_type &gt; n_oz</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00237">sparsity_pattern.h:237</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af8cfeea16684fc12a602e2bb08ebbe60"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classlibMesh_1_1SparsityPattern_1_1NonlocalGraph.html">SparsityPattern::NonlocalGraph</a>&amp; libMesh::SparsityPattern::Build::get_nonlocal_pattern </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Rows of sparse matrix indices, mapped from global DoF number, which belong on other processors. </p>
<p>Stored here only temporarily until a <a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a823ca5ea6a3f2ffebb568815cd51c63c" title="Send sparsity pattern data relevant to other processors to those processors, and receive and incorpor...">parallel_sync()</a> sends them where they belong. </p>

<p>在文件 <a class="el" href="sparsity__pattern_8h_source.html">sparsity_pattern.h</a> 第 <a class="el" href="sparsity__pattern_8h_source.html#l00158">158</a> 行定义.</p>

<p>参考 <a class="el" href="sparsity__pattern_8h_source.html#l00233">nonlocal_pattern</a>.</p>
<div class="fragment"><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  { <span class="keywordflow">return</span> <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#ae9a6ba8ebda480adf92983c4a7d0711c">nonlocal_pattern</a>; }</div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_ae9a6ba8ebda480adf92983c4a7d0711c"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#ae9a6ba8ebda480adf92983c4a7d0711c">libMesh::SparsityPattern::Build::nonlocal_pattern</a></div><div class="ttdeci">SparsityPattern::NonlocalGraph nonlocal_pattern</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00233">sparsity_pattern.h:233</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7849811fdb1b4272b400cebb96966be7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classlibMesh_1_1SparsityPattern_1_1Graph.html">SparsityPattern::Graph</a>&amp; libMesh::SparsityPattern::Build::get_sparsity_pattern </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Rows of sparse matrix indices, indexed by the offset from the first DoF on this processor. </p>

<p>在文件 <a class="el" href="sparsity__pattern_8h_source.html">sparsity_pattern.h</a> 第 <a class="el" href="sparsity__pattern_8h_source.html#l00150">150</a> 行定义.</p>

<p>参考 <a class="el" href="sparsity__pattern_8h_source.html#l00231">sparsity_pattern</a>.</p>
<div class="fragment"><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  { <span class="keywordflow">return</span> <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a054aa3bf4ab1ff21352e2aaf2495c589">sparsity_pattern</a>; }</div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_a054aa3bf4ab1ff21352e2aaf2495c589"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#a054aa3bf4ab1ff21352e2aaf2495c589">libMesh::SparsityPattern::Build::sparsity_pattern</a></div><div class="ttdeci">SparsityPattern::Graph sparsity_pattern</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00231">sparsity_pattern.h:231</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a99a71efbf51337a5b67893b45e98cb7d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void libMesh::SparsityPattern::Build::handle_vi_vj </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>element_dofs_i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>element_dofs_j</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>在文件 <a class="el" href="sparsity__pattern_8C_source.html">sparsity_pattern.C</a> 第 <a class="el" href="sparsity__pattern_8C_source.html#l00111">111</a> 行定义.</p>

<p>参考 <a class="el" href="sparsity__pattern_8h_source.html#l00202">dof_map</a>, <a class="el" href="dof__map_8h_source.html#l00708">libMesh::DofMap::end_dof()</a>, <a class="el" href="dof__map_8h_source.html#l00684">libMesh::DofMap::first_dof()</a>, <a class="el" href="sparsity__pattern_8h_source.html#l00218">hashed_dof_sets</a>, <a class="el" href="sparsity__pattern_8h_source.html#l00233">nonlocal_pattern</a>, <a class="el" href="namespacelibMesh_1_1SparsityPattern.html#a49c80b2ced17a3c61377fd9e6a196146">libMesh::SparsityPattern::sort_row()</a> , 以及 <a class="el" href="sparsity__pattern_8h_source.html#l00231">sparsity_pattern</a>.</p>

<p>参考自 <a class="el" href="sparsity__pattern_8C_source.html#l00238">operator()()</a>.</p>
<div class="fragment"><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;{</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n_dofs_on_element_i =</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    cast_int&lt;unsigned int&gt;(element_dofs_i.size());</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#af18245d4f872c36a41fc74086bda3e80">processor_id_type</a> proc_id     = <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">dof_map</a>.processor_id();</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> first_dof_on_proc = <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">dof_map</a>.<a class="code" href="classlibMesh_1_1DofMap.html#a2cc5678707a3bcb0f64b1cb5c73c813c">first_dof</a>(proc_id);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> end_dof_on_proc   = <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">dof_map</a>.<a class="code" href="classlibMesh_1_1DofMap.html#a265de993749f5bab70c3f9c860defd49">end_dof</a>(proc_id);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  std::vector&lt;dof_id_type&gt;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    dofs_to_add;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n_dofs_on_element_j =</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    cast_int&lt;unsigned int&gt;(element_dofs_j.size());</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="comment">// It only makes sense to compute hashes and see if we can skip</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="comment">// doing work when there are a &quot;large&quot; amount of DOFs for a given</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="comment">// element. The cutoff for &quot;large&quot; is somewhat arbitrarily chosen</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="comment">// based on a test case with a spider node that resulted in O(10^3)</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="comment">// entries in element_dofs_i for O(10^3) elements. Making this</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="comment">// number larger will disable the hashing optimization in more</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="comment">// cases.</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="keywordtype">bool</span> dofs_seen = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="keywordflow">if</span> (n_dofs_on_element_j &gt; 0 &amp;&amp; n_dofs_on_element_i &gt; 256)</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      <span class="keyword">auto</span> hash_i = Utility::hashword(element_dofs_i);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      <span class="keyword">auto</span> hash_j = Utility::hashword(element_dofs_j);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      <span class="keyword">auto</span> final_hash = Utility::hashword2(hash_i, hash_j);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      <span class="keyword">auto</span> result = <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a2fb9ad8334bf9313a8ad9231e64724f2">hashed_dof_sets</a>.insert(final_hash);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      <span class="comment">// if insert failed, we have already seen these dofs</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      dofs_seen = !result.second;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="comment">// there might be 0 dofs for the other variable on the same element</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="comment">// (when subdomain variables do not overlap) and that&#39;s when we do</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="comment">// not do anything</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keywordflow">if</span> (n_dofs_on_element_j &gt; 0 &amp;&amp; !dofs_seen)</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;n_dofs_on_element_i; i++)</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        {</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;          <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> ig = element_dofs_i[i];</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;          <a class="code" href="namespacelibMesh_1_1SparsityPattern.html#ab73448d7cfb2bfc5ebeba5d0561d71df">SparsityPattern::Row</a> * row;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;          <span class="comment">// We save non-local row components for now so we can</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;          <span class="comment">// communicate them to other processors later.</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;          <span class="keywordflow">if</span> ((ig &gt;= first_dof_on_proc) &amp;&amp;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;              (ig &lt;  end_dof_on_proc))</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;              <span class="comment">// This is what I mean</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;              <span class="comment">// libmesh_assert_greater_equal ((ig - first_dof_on_proc), 0);</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;              <span class="comment">// but do the test like this because ig and</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;              <span class="comment">// first_dof_on_proc are unsigned ints</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;              libmesh_assert_greater_equal (ig, first_dof_on_proc);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;              libmesh_assert_less (ig, (<a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a054aa3bf4ab1ff21352e2aaf2495c589">sparsity_pattern</a>.size() +</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                                        first_dof_on_proc));</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;              row = &amp;<a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a054aa3bf4ab1ff21352e2aaf2495c589">sparsity_pattern</a>[ig - first_dof_on_proc];</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            }</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;              row = &amp;<a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#ae9a6ba8ebda480adf92983c4a7d0711c">nonlocal_pattern</a>[ig];</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            }</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;          <span class="comment">// If the row is empty we will add *all*</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;          <span class="comment">// the element j DOFs, so just do that.</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;          <span class="keywordflow">if</span> (row-&gt;empty())</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;              row-&gt;insert(row-&gt;end(),</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                          element_dofs_j.begin(),</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                          element_dofs_j.end());</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            }</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;              <span class="comment">// Build a list of the DOF indices not found in the</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;              <span class="comment">// sparsity pattern</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;              dofs_to_add.clear();</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;              <span class="comment">// Cache iterators.  Low will move forward, subsequent</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;              <span class="comment">// searches will be on smaller ranges</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;              SparsityPattern::Row::iterator</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                low  = std::lower_bound</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                (row-&gt;begin(), row-&gt;end(), element_dofs_j.front()),</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                high = std::upper_bound</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                (low,          row-&gt;end(), element_dofs_j.back());</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;              <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j=0; j&lt;n_dofs_on_element_j; j++)</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                  <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> jg = element_dofs_j[j];</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                  <span class="comment">// See if jg is in the sorted range</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                  std::pair&lt;SparsityPattern::Row::iterator,</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                            SparsityPattern::Row::iterator&gt;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                    pos = std::equal_range (low, high, jg);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                  <span class="comment">// Must add jg if it wasn&#39;t found</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                  <span class="keywordflow">if</span> (pos.first == pos.second)</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                    dofs_to_add.push_back(jg);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                  <span class="comment">// pos.first is now a valid lower bound for any</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                  <span class="comment">// remaining element j DOFs. (That&#39;s why we sorted them.)</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                  <span class="comment">// Use it for the next search</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                  low = pos.first;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;              <span class="comment">// Add to the sparsity pattern</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;              <span class="keywordflow">if</span> (!dofs_to_add.empty())</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                  <span class="keyword">const</span> std::size_t old_size = row-&gt;size();</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                  row-&gt;insert (row-&gt;end(),</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                               dofs_to_add.begin(),</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                               dofs_to_add.end());</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                  <a class="code" href="namespacelibMesh_1_1SparsityPattern.html#a49c80b2ced17a3c61377fd9e6a196146">SparsityPattern::sort_row</a></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                    (row-&gt;begin(), row-&gt;begin()+old_size,</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                     row-&gt;end());</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        } <span class="comment">// End dofs-of-var-i loop</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    } <span class="comment">// End if-dofs-of-var-j</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;}</div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_a054aa3bf4ab1ff21352e2aaf2495c589"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#a054aa3bf4ab1ff21352e2aaf2495c589">libMesh::SparsityPattern::Build::sparsity_pattern</a></div><div class="ttdeci">SparsityPattern::Graph sparsity_pattern</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00231">sparsity_pattern.h:231</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_a2fb9ad8334bf9313a8ad9231e64724f2"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#a2fb9ad8334bf9313a8ad9231e64724f2">libMesh::SparsityPattern::Build::hashed_dof_sets</a></div><div class="ttdeci">std::unordered_set&lt; dof_id_type &gt; hashed_dof_sets</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00218">sparsity_pattern.h:218</a></div></div>
<div class="ttc" id="namespacelibMesh_html_af18245d4f872c36a41fc74086bda3e80"><div class="ttname"><a href="namespacelibMesh.html#af18245d4f872c36a41fc74086bda3e80">libMesh::processor_id_type</a></div><div class="ttdeci">uint8_t processor_id_type</div><div class="ttdef"><b>Definition:</b> <a href="id__types_8h_source.html#l00104">id_types.h:104</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_adaaeb1039af971d4376bcd896686a281"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">libMesh::SparsityPattern::Build::dof_map</a></div><div class="ttdeci">const DofMap &amp; dof_map</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00202">sparsity_pattern.h:202</a></div></div>
<div class="ttc" id="namespacelibMesh_1_1SparsityPattern_html_ab73448d7cfb2bfc5ebeba5d0561d71df"><div class="ttname"><a href="namespacelibMesh_1_1SparsityPattern.html#ab73448d7cfb2bfc5ebeba5d0561d71df">libMesh::SparsityPattern::Row</a></div><div class="ttdeci">std::vector&lt; dof_id_type, Threads::scalable_allocator&lt; dof_id_type &gt; &gt; Row</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00051">sparsity_pattern.h:51</a></div></div>
<div class="ttc" id="classlibMesh_1_1DofMap_html_a2cc5678707a3bcb0f64b1cb5c73c813c"><div class="ttname"><a href="classlibMesh_1_1DofMap.html#a2cc5678707a3bcb0f64b1cb5c73c813c">libMesh::DofMap::first_dof</a></div><div class="ttdeci">dof_id_type first_dof(const processor_id_type proc) const </div><div class="ttdef"><b>Definition:</b> <a href="dof__map_8h_source.html#l00684">dof_map.h:684</a></div></div>
<div class="ttc" id="classlibMesh_1_1DofMap_html_a265de993749f5bab70c3f9c860defd49"><div class="ttname"><a href="classlibMesh_1_1DofMap.html#a265de993749f5bab70c3f9c860defd49">libMesh::DofMap::end_dof</a></div><div class="ttdeci">dof_id_type end_dof(const processor_id_type proc) const </div><div class="ttdef"><b>Definition:</b> <a href="dof__map_8h_source.html#l00708">dof_map.h:708</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_ae9a6ba8ebda480adf92983c4a7d0711c"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#ae9a6ba8ebda480adf92983c4a7d0711c">libMesh::SparsityPattern::Build::nonlocal_pattern</a></div><div class="ttdeci">SparsityPattern::NonlocalGraph nonlocal_pattern</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00233">sparsity_pattern.h:233</a></div></div>
<div class="ttc" id="namespacelibMesh_html_ab4541d74809228310a715b11c40587fc"><div class="ttname"><a href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">libMesh::dof_id_type</a></div><div class="ttdeci">uint8_t dof_id_type</div><div class="ttdef"><b>Definition:</b> <a href="id__types_8h_source.html#l00067">id_types.h:67</a></div></div>
<div class="ttc" id="namespacelibMesh_1_1SparsityPattern_html_a49c80b2ced17a3c61377fd9e6a196146"><div class="ttname"><a href="namespacelibMesh_1_1SparsityPattern.html#a49c80b2ced17a3c61377fd9e6a196146">libMesh::SparsityPattern::sort_row</a></div><div class="ttdeci">static void sort_row(const BidirectionalIterator begin, BidirectionalIterator middle, const BidirectionalIterator end)</div><div class="ttdoc">Splices the two sorted ranges [begin,middle) and [middle,end) into one sorted range [begin...</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0a76acc8f8e9997d9572957695835302"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void libMesh::SparsityPattern::Build::join </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html">Build</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Combine the sparsity pattern in <code>other</code> with this object's sparsity pattern. </p>
<p>Useful in multithreaded loops. </p>

<p>在文件 <a class="el" href="sparsity__pattern_8C_source.html">sparsity_pattern.C</a> 第 <a class="el" href="sparsity__pattern_8C_source.html#l00363">363</a> 行定义.</p>

<p>参考 <a class="el" href="sparsity__pattern_8h_source.html#l00202">dof_map</a>, <a class="el" href="dof__map_8h_source.html#l00708">libMesh::DofMap::end_dof()</a>, <a class="el" href="dof__map_8h_source.html#l00684">libMesh::DofMap::first_dof()</a>, <a class="el" href="sparsity__pattern_8h_source.html#l00218">hashed_dof_sets</a>, <a class="el" href="dof__map_8h_source.html#l00659">libMesh::DofMap::n_dofs()</a>, <a class="el" href="dof__map_8h_source.html#l00675">libMesh::DofMap::n_dofs_on_processor()</a>, <a class="el" href="sparsity__pattern_8h_source.html#l00235">n_nz</a>, <a class="el" href="sparsity__pattern_8h_source.html#l00237">n_oz</a>, <a class="el" href="sparsity__pattern_8h_source.html#l00206">need_full_sparsity_pattern</a>, <a class="el" href="sparsity__pattern_8h_source.html#l00233">nonlocal_pattern</a> , 以及 <a class="el" href="sparsity__pattern_8h_source.html#l00231">sparsity_pattern</a>.</p>
<div class="fragment"><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;{</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#af18245d4f872c36a41fc74086bda3e80">processor_id_type</a> proc_id           = <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">dof_map</a>.processor_id();</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a>       n_global_dofs     = <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">dof_map</a>.<a class="code" href="classlibMesh_1_1DofMap.html#a77f8d984574b1bf8886057799e9b0134">n_dofs</a>();</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a>       n_dofs_on_proc    = <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">dof_map</a>.<a class="code" href="classlibMesh_1_1DofMap.html#a765ac72717810e0a86f04ab8a938cd22">n_dofs_on_processor</a>(proc_id);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a>       first_dof_on_proc = <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">dof_map</a>.<a class="code" href="classlibMesh_1_1DofMap.html#a2cc5678707a3bcb0f64b1cb5c73c813c">first_dof</a>(proc_id);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a>       end_dof_on_proc   = <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">dof_map</a>.<a class="code" href="classlibMesh_1_1DofMap.html#a265de993749f5bab70c3f9c860defd49">end_dof</a>(proc_id);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  libmesh_assert_equal_to (<a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a054aa3bf4ab1ff21352e2aaf2495c589">sparsity_pattern</a>.size(), other.sparsity_pattern.size());</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  libmesh_assert_equal_to (<a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#abd98a4e05536e03e6d1281c8ceee0f7d">n_nz</a>.size(), <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a054aa3bf4ab1ff21352e2aaf2495c589">sparsity_pattern</a>.size());</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  libmesh_assert_equal_to (<a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af7805e48c78b15d9df8c618dd593a3bb">n_oz</a>.size(), <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a054aa3bf4ab1ff21352e2aaf2495c589">sparsity_pattern</a>.size());</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> r=0; r&lt;n_dofs_on_proc; r++)</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    {</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      <span class="comment">// increment the number of on and off-processor nonzeros in this row</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      <span class="comment">// (note this will be an upper bound unless we need the full sparsity pattern)</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af61ba6f3d2d45a3cfacb0d32b4bfe428">need_full_sparsity_pattern</a>)</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;          <a class="code" href="namespacelibMesh_1_1SparsityPattern.html#ab73448d7cfb2bfc5ebeba5d0561d71df">SparsityPattern::Row</a>       &amp; my_row    = <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a054aa3bf4ab1ff21352e2aaf2495c589">sparsity_pattern</a>[r];</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;          <span class="keyword">const</span> <a class="code" href="namespacelibMesh_1_1SparsityPattern.html#ab73448d7cfb2bfc5ebeba5d0561d71df">SparsityPattern::Row</a> &amp; their_row = other.sparsity_pattern[r];</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;          <span class="comment">// simple copy if I have no dofs</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;          <span class="keywordflow">if</span> (my_row.empty())</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            my_row = their_row;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;          <span class="comment">// otherwise add their DOFs to mine, resort, and re-unique the row</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!their_row.empty()) <span class="comment">// do nothing for the trivial case where</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            {                          <span class="comment">// their row is empty</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;              my_row.insert (my_row.end(),</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                             their_row.begin(),</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                             their_row.end());</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;              <span class="comment">// We cannot use SparsityPattern::sort_row() here because it expects</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;              <span class="comment">// the [begin,middle) [middle,end) to be non-overlapping.  This is not</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;              <span class="comment">// necessarily the case here, so use std::sort()</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;              std::sort (my_row.begin(), my_row.end());</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;              my_row.erase(std::unique (my_row.begin(), my_row.end()), my_row.end());</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            }</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;          <span class="comment">// fix the number of on and off-processor nonzeros in this row</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;          <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#abd98a4e05536e03e6d1281c8ceee0f7d">n_nz</a>[r] = <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af7805e48c78b15d9df8c618dd593a3bb">n_oz</a>[r] = 0;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;          <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp; df : my_row)</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            <span class="keywordflow">if</span> ((df &lt; first_dof_on_proc) || (df &gt;= end_dof_on_proc))</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;              <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af7805e48c78b15d9df8c618dd593a3bb">n_oz</a>[r]++;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;              <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#abd98a4e05536e03e6d1281c8ceee0f7d">n_nz</a>[r]++;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        }</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        {</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;          <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#abd98a4e05536e03e6d1281c8ceee0f7d">n_nz</a>[r] += other.n_nz[r];</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;          <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#abd98a4e05536e03e6d1281c8ceee0f7d">n_nz</a>[r] = std::min(<a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#abd98a4e05536e03e6d1281c8ceee0f7d">n_nz</a>[r], n_dofs_on_proc);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;          <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af7805e48c78b15d9df8c618dd593a3bb">n_oz</a>[r] += other.n_oz[r];</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;          <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af7805e48c78b15d9df8c618dd593a3bb">n_oz</a>[r] =std::min(<a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af7805e48c78b15d9df8c618dd593a3bb">n_oz</a>[r], static_cast&lt;dof_id_type&gt;(n_global_dofs-<a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#abd98a4e05536e03e6d1281c8ceee0f7d">n_nz</a>[r]));</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        }</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    }</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="comment">// Move nonlocal row information to ourselves; the other thread</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <span class="comment">// won&#39;t need it in the map after that.</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp; p : other.nonlocal_pattern)</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="preprocessor"></span>      <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> dof_id = p.first;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      <a class="code" href="namespacelibMesh.html#af18245d4f872c36a41fc74086bda3e80">processor_id_type</a> dbg_proc_id = 0;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;      <span class="keywordflow">while</span> (dof_id &gt;= <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">dof_map</a>.<a class="code" href="classlibMesh_1_1DofMap.html#a265de993749f5bab70c3f9c860defd49">end_dof</a>(dbg_proc_id))</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        dbg_proc_id++;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      libmesh_assert (dbg_proc_id != this-&gt;processor_id());</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      <span class="keyword">const</span> <a class="code" href="namespacelibMesh_1_1SparsityPattern.html#ab73448d7cfb2bfc5ebeba5d0561d71df">SparsityPattern::Row</a> &amp; their_row = p.second;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      <span class="comment">// We should have no empty values in a map</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      libmesh_assert (!their_row.empty());</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      NonlocalGraph::iterator my_it = <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#ae9a6ba8ebda480adf92983c4a7d0711c">nonlocal_pattern</a>.find(p.first);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      <span class="keywordflow">if</span> (my_it == <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#ae9a6ba8ebda480adf92983c4a7d0711c">nonlocal_pattern</a>.end())</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;          <span class="comment">//          nonlocal_pattern[it-&gt;first].swap(their_row);</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;          <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#ae9a6ba8ebda480adf92983c4a7d0711c">nonlocal_pattern</a>[p.first] = their_row;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        }</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        {</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;          <a class="code" href="namespacelibMesh_1_1SparsityPattern.html#ab73448d7cfb2bfc5ebeba5d0561d71df">SparsityPattern::Row</a> &amp; my_row = my_it-&gt;second;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;          my_row.insert (my_row.end(),</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                         their_row.begin(),</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                         their_row.end());</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;          <span class="comment">// We cannot use SparsityPattern::sort_row() here because it expects</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;          <span class="comment">// the [begin,middle) [middle,end) to be non-overlapping.  This is not</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;          <span class="comment">// necessarily the case here, so use std::sort()</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;          std::sort (my_row.begin(), my_row.end());</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;          my_row.erase(std::unique (my_row.begin(), my_row.end()), my_row.end());</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        }</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    }</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <span class="comment">// Combine the other thread&#39;s hashed_dof_sets with ours.</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a2fb9ad8334bf9313a8ad9231e64724f2">hashed_dof_sets</a>.insert(other.hashed_dof_sets.begin(),</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                         other.hashed_dof_sets.end());</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;}</div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_a054aa3bf4ab1ff21352e2aaf2495c589"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#a054aa3bf4ab1ff21352e2aaf2495c589">libMesh::SparsityPattern::Build::sparsity_pattern</a></div><div class="ttdeci">SparsityPattern::Graph sparsity_pattern</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00231">sparsity_pattern.h:231</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_af61ba6f3d2d45a3cfacb0d32b4bfe428"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#af61ba6f3d2d45a3cfacb0d32b4bfe428">libMesh::SparsityPattern::Build::need_full_sparsity_pattern</a></div><div class="ttdeci">const bool need_full_sparsity_pattern</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00206">sparsity_pattern.h:206</a></div></div>
<div class="ttc" id="classlibMesh_1_1DofMap_html_a77f8d984574b1bf8886057799e9b0134"><div class="ttname"><a href="classlibMesh_1_1DofMap.html#a77f8d984574b1bf8886057799e9b0134">libMesh::DofMap::n_dofs</a></div><div class="ttdeci">dof_id_type n_dofs() const </div><div class="ttdef"><b>Definition:</b> <a href="dof__map_8h_source.html#l00659">dof_map.h:659</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_a2fb9ad8334bf9313a8ad9231e64724f2"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#a2fb9ad8334bf9313a8ad9231e64724f2">libMesh::SparsityPattern::Build::hashed_dof_sets</a></div><div class="ttdeci">std::unordered_set&lt; dof_id_type &gt; hashed_dof_sets</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00218">sparsity_pattern.h:218</a></div></div>
<div class="ttc" id="namespacelibMesh_html_af18245d4f872c36a41fc74086bda3e80"><div class="ttname"><a href="namespacelibMesh.html#af18245d4f872c36a41fc74086bda3e80">libMesh::processor_id_type</a></div><div class="ttdeci">uint8_t processor_id_type</div><div class="ttdef"><b>Definition:</b> <a href="id__types_8h_source.html#l00104">id_types.h:104</a></div></div>
<div class="ttc" id="classlibMesh_1_1DofMap_html_a765ac72717810e0a86f04ab8a938cd22"><div class="ttname"><a href="classlibMesh_1_1DofMap.html#a765ac72717810e0a86f04ab8a938cd22">libMesh::DofMap::n_dofs_on_processor</a></div><div class="ttdeci">dof_id_type n_dofs_on_processor(const processor_id_type proc) const </div><div class="ttdef"><b>Definition:</b> <a href="dof__map_8h_source.html#l00675">dof_map.h:675</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_adaaeb1039af971d4376bcd896686a281"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">libMesh::SparsityPattern::Build::dof_map</a></div><div class="ttdeci">const DofMap &amp; dof_map</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00202">sparsity_pattern.h:202</a></div></div>
<div class="ttc" id="namespacelibMesh_1_1SparsityPattern_html_ab73448d7cfb2bfc5ebeba5d0561d71df"><div class="ttname"><a href="namespacelibMesh_1_1SparsityPattern.html#ab73448d7cfb2bfc5ebeba5d0561d71df">libMesh::SparsityPattern::Row</a></div><div class="ttdeci">std::vector&lt; dof_id_type, Threads::scalable_allocator&lt; dof_id_type &gt; &gt; Row</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00051">sparsity_pattern.h:51</a></div></div>
<div class="ttc" id="classlibMesh_1_1DofMap_html_a2cc5678707a3bcb0f64b1cb5c73c813c"><div class="ttname"><a href="classlibMesh_1_1DofMap.html#a2cc5678707a3bcb0f64b1cb5c73c813c">libMesh::DofMap::first_dof</a></div><div class="ttdeci">dof_id_type first_dof(const processor_id_type proc) const </div><div class="ttdef"><b>Definition:</b> <a href="dof__map_8h_source.html#l00684">dof_map.h:684</a></div></div>
<div class="ttc" id="classlibMesh_1_1DofMap_html_a265de993749f5bab70c3f9c860defd49"><div class="ttname"><a href="classlibMesh_1_1DofMap.html#a265de993749f5bab70c3f9c860defd49">libMesh::DofMap::end_dof</a></div><div class="ttdeci">dof_id_type end_dof(const processor_id_type proc) const </div><div class="ttdef"><b>Definition:</b> <a href="dof__map_8h_source.html#l00708">dof_map.h:708</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_abd98a4e05536e03e6d1281c8ceee0f7d"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#abd98a4e05536e03e6d1281c8ceee0f7d">libMesh::SparsityPattern::Build::n_nz</a></div><div class="ttdeci">std::vector&lt; dof_id_type &gt; n_nz</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00235">sparsity_pattern.h:235</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_ae9a6ba8ebda480adf92983c4a7d0711c"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#ae9a6ba8ebda480adf92983c4a7d0711c">libMesh::SparsityPattern::Build::nonlocal_pattern</a></div><div class="ttdeci">SparsityPattern::NonlocalGraph nonlocal_pattern</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00233">sparsity_pattern.h:233</a></div></div>
<div class="ttc" id="namespacelibMesh_html_ab4541d74809228310a715b11c40587fc"><div class="ttname"><a href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">libMesh::dof_id_type</a></div><div class="ttdeci">uint8_t dof_id_type</div><div class="ttdef"><b>Definition:</b> <a href="id__types_8h_source.html#l00067">id_types.h:67</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_af7805e48c78b15d9df8c618dd593a3bb"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#af7805e48c78b15d9df8c618dd593a3bb">libMesh::SparsityPattern::Build::n_oz</a></div><div class="ttdeci">std::vector&lt; dof_id_type &gt; n_oz</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00237">sparsity_pattern.h:237</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acc76917e49e35f190ee11ca95d319db8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void libMesh::SparsityPattern::Build::operator() </td>
          <td>(</td>
          <td class="paramtype">const ConstElemRange &amp;&#160;</td>
          <td class="paramname"><em>range</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add entries from a range of elements to this object's sparsity pattern. </p>

<p>在文件 <a class="el" href="sparsity__pattern_8C_source.html">sparsity_pattern.C</a> 第 <a class="el" href="sparsity__pattern_8C_source.html#l00238">238</a> 行定义.</p>

<p>参考 <a class="el" href="dof__map_8h_source.html#l00344">libMesh::DofMap::coupling_functors_begin()</a>, <a class="el" href="dof__map_8h_source.html#l00350">libMesh::DofMap::coupling_functors_end()</a>, <a class="el" href="sparsity__pattern_8h_source.html#l00202">dof_map</a>, <a class="el" href="dof__map_8h_source.html#l00708">libMesh::DofMap::end_dof()</a>, <a class="el" href="dof__map_8h_source.html#l00684">libMesh::DofMap::first_dof()</a>, <a class="el" href="sparsity__pattern_8C_source.html#l00111">handle_vi_vj()</a>, <a class="el" href="dof__object_8h_source.html#l00488">libMesh::DofObject::invalid_processor_id</a>, <a class="el" href="dof__map_8C_source.html#l01440">libMesh::DofMap::merge_ghost_functor_outputs()</a>, <a class="el" href="dof__map_8h_source.html#l00675">libMesh::DofMap::n_dofs_on_processor()</a>, <a class="el" href="sparsity__pattern_8h_source.html#l00235">n_nz</a>, <a class="el" href="sparsity__pattern_8h_source.html#l00237">n_oz</a>, <a class="el" href="dof__map_8h_source.html#l00621">libMesh::DofMap::n_variables()</a>, <a class="el" href="sparsity__pattern_8h_source.html#l00206">need_full_sparsity_pattern</a>, <a class="el" href="sparsity__pattern_8C_source.html#l00092">sorted_connected_dofs()</a> , 以及 <a class="el" href="sparsity__pattern_8h_source.html#l00231">sparsity_pattern</a>.</p>
<div class="fragment"><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;{</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="comment">// Compute the sparsity structure of the global matrix.  This can be</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="comment">// fed into a PetscMatrix to allocate exactly the number of nonzeros</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="comment">// necessary to store the matrix.  This algorithm should be linear</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="comment">// in the (# of elements)*(# nodes per element)</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#af18245d4f872c36a41fc74086bda3e80">processor_id_type</a> proc_id     = <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">dof_map</a>.processor_id();</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> n_dofs_on_proc    = <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">dof_map</a>.<a class="code" href="classlibMesh_1_1DofMap.html#a765ac72717810e0a86f04ab8a938cd22">n_dofs_on_processor</a>(proc_id);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> first_dof_on_proc = <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">dof_map</a>.<a class="code" href="classlibMesh_1_1DofMap.html#a2cc5678707a3bcb0f64b1cb5c73c813c">first_dof</a>(proc_id);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> end_dof_on_proc   = <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">dof_map</a>.<a class="code" href="classlibMesh_1_1DofMap.html#a265de993749f5bab70c3f9c860defd49">end_dof</a>(proc_id);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a054aa3bf4ab1ff21352e2aaf2495c589">sparsity_pattern</a>.resize(n_dofs_on_proc);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="comment">// Handle dof coupling specified by library and user coupling functors</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n_var = <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">dof_map</a>.<a class="code" href="classlibMesh_1_1DofMap.html#aee89c467613b296c215421d60d5ae961">n_variables</a>();</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    std::vector&lt;std::vector&lt;dof_id_type&gt; &gt; element_dofs_i(n_var);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    std::vector&lt;const Elem *&gt; coupled_neighbors;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp; elem : range)</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="comment">// Make some fake element iterators defining a range</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <span class="comment">// pointing to only this element.</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        Elem * <span class="keyword">const</span> * elempp = <span class="keyword">const_cast&lt;</span>Elem * <span class="keyword">const </span>*<span class="keyword">&gt;</span>(&amp;elem);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        Elem * <span class="keyword">const</span> * elemend = elempp+1;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="keyword">const</span> MeshBase::const_element_iterator fake_elem_it =</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;          MeshBase::const_element_iterator(elempp,</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                                           elemend,</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                                           Predicates::NotNull&lt;Elem * const *&gt;());</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <span class="keyword">const</span> MeshBase::const_element_iterator fake_elem_end =</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;          MeshBase::const_element_iterator(elemend,</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                                           elemend,</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                                           Predicates::NotNull&lt;Elem * const *&gt;());</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        GhostingFunctor::map_type elements_to_couple;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <a class="code" href="classlibMesh_1_1DofMap.html#abddb472d25fdb74e211e214710c48534">DofMap::CouplingMatricesSet</a> temporary_coupling_matrices;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">dof_map</a>.<a class="code" href="classlibMesh_1_1DofMap.html#aaba8d0fe4f60763e0a52f7ae1d4b7153">merge_ghost_functor_outputs</a>(elements_to_couple,</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                                            temporary_coupling_matrices,</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                                            <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">dof_map</a>.<a class="code" href="classlibMesh_1_1DofMap.html#a167ad5d7c58f7ef60da5e365764962c1">coupling_functors_begin</a>(),</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                                            <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">dof_map</a>.<a class="code" href="classlibMesh_1_1DofMap.html#a13a2755e548a51040ee833c1aca2520b">coupling_functors_end</a>(),</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                                            fake_elem_it,</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                                            fake_elem_end,</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                                            <a class="code" href="classlibMesh_1_1DofObject.html#aa65deab833c8b1802790cd43ab1b6ee4">DofObject::invalid_processor_id</a>);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> vi=0; vi&lt;n_var; vi++)</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;          this-&gt;<a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af6a369d62cc83a1003e315cf178c9daa">sorted_connected_dofs</a>(elem, element_dofs_i[vi], vi);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> vi=0; vi&lt;n_var; vi++)</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;          <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp; [partner, ghost_coupling] : elements_to_couple)</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;              <span class="comment">// Loop over coupling matrix row variables if we have a</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;              <span class="comment">// coupling matrix, or all variables if not.</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;              <span class="keywordflow">if</span> (ghost_coupling)</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                  libmesh_assert_equal_to (ghost_coupling-&gt;size(), n_var);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                  ConstCouplingRow ccr(vi, *ghost_coupling);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp; idx : ccr)</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                    {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                      <span class="keywordflow">if</span> (partner == elem)</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                        this-&gt;<a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a99a71efbf51337a5b67893b45e98cb7d">handle_vi_vj</a>(element_dofs_i[vi], element_dofs_i[idx]);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                        {</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                          std::vector&lt;dof_id_type&gt; partner_dofs;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                          this-&gt;<a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af6a369d62cc83a1003e315cf178c9daa">sorted_connected_dofs</a>(partner, partner_dofs, idx);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                          this-&gt;<a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a99a71efbf51337a5b67893b45e98cb7d">handle_vi_vj</a>(element_dofs_i[vi], partner_dofs);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                        }</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                    }</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                }</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;              <span class="keywordflow">else</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> vj = 0; vj != n_var; ++vj)</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                    {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                      <span class="keywordflow">if</span> (partner == elem)</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                        this-&gt;<a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a99a71efbf51337a5b67893b45e98cb7d">handle_vi_vj</a>(element_dofs_i[vi], element_dofs_i[vj]);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                        {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                          std::vector&lt;dof_id_type&gt; partner_dofs;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                          this-&gt;<a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af6a369d62cc83a1003e315cf178c9daa">sorted_connected_dofs</a>(partner, partner_dofs, vj);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                          this-&gt;<a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a99a71efbf51337a5b67893b45e98cb7d">handle_vi_vj</a>(element_dofs_i[vi], partner_dofs);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                        }</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                    }</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            } <span class="comment">// End ghosted element loop</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      } <span class="comment">// End range element loop</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  } <span class="comment">// End ghosting functor section</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="comment">// Now a new chunk of sparsity structure is built for all of the</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="comment">// DOFs connected to our rows of the matrix.</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="comment">// If we&#39;re building a full sparsity pattern, then we&#39;ve got</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="comment">// complete rows to work with, so we can just count them from</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="comment">// scratch.</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af61ba6f3d2d45a3cfacb0d32b4bfe428">need_full_sparsity_pattern</a>)</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    {</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#abd98a4e05536e03e6d1281c8ceee0f7d">n_nz</a>.clear();</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af7805e48c78b15d9df8c618dd593a3bb">n_oz</a>.clear();</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    }</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#abd98a4e05536e03e6d1281c8ceee0f7d">n_nz</a>.resize (n_dofs_on_proc, 0);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af7805e48c78b15d9df8c618dd593a3bb">n_oz</a>.resize (n_dofs_on_proc, 0);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> i=0; i&lt;n_dofs_on_proc; i++)</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      <span class="comment">// Get the row of the sparsity pattern</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      <a class="code" href="namespacelibMesh_1_1SparsityPattern.html#ab73448d7cfb2bfc5ebeba5d0561d71df">SparsityPattern::Row</a> &amp; row = <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a054aa3bf4ab1ff21352e2aaf2495c589">sparsity_pattern</a>[i];</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp; df : row)</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="keywordflow">if</span> ((df &lt; first_dof_on_proc) || (df &gt;= end_dof_on_proc))</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;          <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af7805e48c78b15d9df8c618dd593a3bb">n_oz</a>[i]++;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;          <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#abd98a4e05536e03e6d1281c8ceee0f7d">n_nz</a>[i]++;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      <span class="comment">// If we&#39;re not building a full sparsity pattern, then we want</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      <span class="comment">// to avoid overcounting these entries as much as possible.</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af61ba6f3d2d45a3cfacb0d32b4bfe428">need_full_sparsity_pattern</a>)</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        row.clear();</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    }</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;}</div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_a054aa3bf4ab1ff21352e2aaf2495c589"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#a054aa3bf4ab1ff21352e2aaf2495c589">libMesh::SparsityPattern::Build::sparsity_pattern</a></div><div class="ttdeci">SparsityPattern::Graph sparsity_pattern</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00231">sparsity_pattern.h:231</a></div></div>
<div class="ttc" id="classlibMesh_1_1DofMap_html_a167ad5d7c58f7ef60da5e365764962c1"><div class="ttname"><a href="classlibMesh_1_1DofMap.html#a167ad5d7c58f7ef60da5e365764962c1">libMesh::DofMap::coupling_functors_begin</a></div><div class="ttdeci">std::set&lt; GhostingFunctor * &gt;::const_iterator coupling_functors_begin() const </div><div class="ttdoc">Beginning of range of coupling functors. </div><div class="ttdef"><b>Definition:</b> <a href="dof__map_8h_source.html#l00344">dof_map.h:344</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_af61ba6f3d2d45a3cfacb0d32b4bfe428"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#af61ba6f3d2d45a3cfacb0d32b4bfe428">libMesh::SparsityPattern::Build::need_full_sparsity_pattern</a></div><div class="ttdeci">const bool need_full_sparsity_pattern</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00206">sparsity_pattern.h:206</a></div></div>
<div class="ttc" id="namespacelibMesh_html_af18245d4f872c36a41fc74086bda3e80"><div class="ttname"><a href="namespacelibMesh.html#af18245d4f872c36a41fc74086bda3e80">libMesh::processor_id_type</a></div><div class="ttdeci">uint8_t processor_id_type</div><div class="ttdef"><b>Definition:</b> <a href="id__types_8h_source.html#l00104">id_types.h:104</a></div></div>
<div class="ttc" id="classlibMesh_1_1DofMap_html_a765ac72717810e0a86f04ab8a938cd22"><div class="ttname"><a href="classlibMesh_1_1DofMap.html#a765ac72717810e0a86f04ab8a938cd22">libMesh::DofMap::n_dofs_on_processor</a></div><div class="ttdeci">dof_id_type n_dofs_on_processor(const processor_id_type proc) const </div><div class="ttdef"><b>Definition:</b> <a href="dof__map_8h_source.html#l00675">dof_map.h:675</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_adaaeb1039af971d4376bcd896686a281"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">libMesh::SparsityPattern::Build::dof_map</a></div><div class="ttdeci">const DofMap &amp; dof_map</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00202">sparsity_pattern.h:202</a></div></div>
<div class="ttc" id="namespacelibMesh_1_1SparsityPattern_html_ab73448d7cfb2bfc5ebeba5d0561d71df"><div class="ttname"><a href="namespacelibMesh_1_1SparsityPattern.html#ab73448d7cfb2bfc5ebeba5d0561d71df">libMesh::SparsityPattern::Row</a></div><div class="ttdeci">std::vector&lt; dof_id_type, Threads::scalable_allocator&lt; dof_id_type &gt; &gt; Row</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00051">sparsity_pattern.h:51</a></div></div>
<div class="ttc" id="classlibMesh_1_1DofMap_html_a2cc5678707a3bcb0f64b1cb5c73c813c"><div class="ttname"><a href="classlibMesh_1_1DofMap.html#a2cc5678707a3bcb0f64b1cb5c73c813c">libMesh::DofMap::first_dof</a></div><div class="ttdeci">dof_id_type first_dof(const processor_id_type proc) const </div><div class="ttdef"><b>Definition:</b> <a href="dof__map_8h_source.html#l00684">dof_map.h:684</a></div></div>
<div class="ttc" id="classlibMesh_1_1DofMap_html_a265de993749f5bab70c3f9c860defd49"><div class="ttname"><a href="classlibMesh_1_1DofMap.html#a265de993749f5bab70c3f9c860defd49">libMesh::DofMap::end_dof</a></div><div class="ttdeci">dof_id_type end_dof(const processor_id_type proc) const </div><div class="ttdef"><b>Definition:</b> <a href="dof__map_8h_source.html#l00708">dof_map.h:708</a></div></div>
<div class="ttc" id="classlibMesh_1_1DofMap_html_abddb472d25fdb74e211e214710c48534"><div class="ttname"><a href="classlibMesh_1_1DofMap.html#abddb472d25fdb74e211e214710c48534">libMesh::DofMap::CouplingMatricesSet</a></div><div class="ttdeci">std::set&lt; std::unique_ptr&lt; CouplingMatrix &gt;, Utility::CompareUnderlying &gt; CouplingMatricesSet</div><div class="ttdef"><b>Definition:</b> <a href="dof__map_8h_source.html#l01742">dof_map.h:1742</a></div></div>
<div class="ttc" id="classlibMesh_1_1DofObject_html_aa65deab833c8b1802790cd43ab1b6ee4"><div class="ttname"><a href="classlibMesh_1_1DofObject.html#aa65deab833c8b1802790cd43ab1b6ee4">libMesh::DofObject::invalid_processor_id</a></div><div class="ttdeci">static const processor_id_type invalid_processor_id</div><div class="ttdoc">An invalid processor_id to distinguish DoFs that have not been assigned to a processor. </div><div class="ttdef"><b>Definition:</b> <a href="dof__object_8h_source.html#l00488">dof_object.h:488</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_af6a369d62cc83a1003e315cf178c9daa"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#af6a369d62cc83a1003e315cf178c9daa">libMesh::SparsityPattern::Build::sorted_connected_dofs</a></div><div class="ttdeci">void sorted_connected_dofs(const Elem *elem, std::vector&lt; dof_id_type &gt; &amp;dofs_vi, unsigned int vi)</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8C_source.html#l00092">sparsity_pattern.C:92</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_abd98a4e05536e03e6d1281c8ceee0f7d"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#abd98a4e05536e03e6d1281c8ceee0f7d">libMesh::SparsityPattern::Build::n_nz</a></div><div class="ttdeci">std::vector&lt; dof_id_type &gt; n_nz</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00235">sparsity_pattern.h:235</a></div></div>
<div class="ttc" id="classlibMesh_1_1DofMap_html_aee89c467613b296c215421d60d5ae961"><div class="ttname"><a href="classlibMesh_1_1DofMap.html#aee89c467613b296c215421d60d5ae961">libMesh::DofMap::n_variables</a></div><div class="ttdeci">unsigned int n_variables() const </div><div class="ttdef"><b>Definition:</b> <a href="dof__map_8h_source.html#l00621">dof_map.h:621</a></div></div>
<div class="ttc" id="classlibMesh_1_1DofMap_html_aaba8d0fe4f60763e0a52f7ae1d4b7153"><div class="ttname"><a href="classlibMesh_1_1DofMap.html#aaba8d0fe4f60763e0a52f7ae1d4b7153">libMesh::DofMap::merge_ghost_functor_outputs</a></div><div class="ttdeci">static void merge_ghost_functor_outputs(GhostingFunctor::map_type &amp;elements_to_ghost, CouplingMatricesSet &amp;temporary_coupling_matrices, const std::set&lt; GhostingFunctor * &gt;::iterator &amp;gf_begin, const std::set&lt; GhostingFunctor * &gt;::iterator &amp;gf_end, const MeshBase::const_element_iterator &amp;elems_begin, const MeshBase::const_element_iterator &amp;elems_end, processor_id_type p)</div><div class="ttdef"><b>Definition:</b> <a href="dof__map_8C_source.html#l01440">dof_map.C:1440</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_a99a71efbf51337a5b67893b45e98cb7d"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#a99a71efbf51337a5b67893b45e98cb7d">libMesh::SparsityPattern::Build::handle_vi_vj</a></div><div class="ttdeci">void handle_vi_vj(const std::vector&lt; dof_id_type &gt; &amp;element_dofs_i, const std::vector&lt; dof_id_type &gt; &amp;element_dofs_j)</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8C_source.html#l00111">sparsity_pattern.C:111</a></div></div>
<div class="ttc" id="classlibMesh_1_1DofMap_html_a13a2755e548a51040ee833c1aca2520b"><div class="ttname"><a href="classlibMesh_1_1DofMap.html#a13a2755e548a51040ee833c1aca2520b">libMesh::DofMap::coupling_functors_end</a></div><div class="ttdeci">std::set&lt; GhostingFunctor * &gt;::const_iterator coupling_functors_end() const </div><div class="ttdoc">End of range of coupling functors. </div><div class="ttdef"><b>Definition:</b> <a href="dof__map_8h_source.html#l00350">dof_map.h:350</a></div></div>
<div class="ttc" id="namespacelibMesh_html_ab4541d74809228310a715b11c40587fc"><div class="ttname"><a href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">libMesh::dof_id_type</a></div><div class="ttdeci">uint8_t dof_id_type</div><div class="ttdef"><b>Definition:</b> <a href="id__types_8h_source.html#l00067">id_types.h:67</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_af7805e48c78b15d9df8c618dd593a3bb"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#af7805e48c78b15d9df8c618dd593a3bb">libMesh::SparsityPattern::Build::n_oz</a></div><div class="ttdeci">std::vector&lt; dof_id_type &gt; n_oz</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00237">sparsity_pattern.h:237</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae8cb7467519617fcc0f3cbbdff3a4ce0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html">Build</a>&amp; libMesh::SparsityPattern::Build::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html">Build</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="af1a0805d900e241f0cb3987dfe2a3c58"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html">Build</a>&amp; libMesh::SparsityPattern::Build::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Build.html">Build</a> &amp;&amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a823ca5ea6a3f2ffebb568815cd51c63c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void libMesh::SparsityPattern::Build::parallel_sync </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send sparsity pattern data relevant to other processors to those processors, and receive and incorporate data relevant to us. </p>

<p>在文件 <a class="el" href="sparsity__pattern_8C_source.html">sparsity_pattern.C</a> 第 <a class="el" href="sparsity__pattern_8C_source.html#l00469">469</a> 行定义.</p>

<p>参考 <a class="el" href="sparsity__pattern_8h_source.html#l00202">dof_map</a>, <a class="el" href="dof__map_8h_source.html#l00708">libMesh::DofMap::end_dof()</a>, <a class="el" href="dof__map_8h_source.html#l00684">libMesh::DofMap::first_dof()</a>, <a class="el" href="dof__map_8h_source.html#l00831">libMesh::DofMap::local_index()</a>, <a class="el" href="dof__map_8h_source.html#l00659">libMesh::DofMap::n_dofs()</a>, <a class="el" href="dof__map_8h_source.html#l00675">libMesh::DofMap::n_dofs_on_processor()</a>, <a class="el" href="sparsity__pattern_8h_source.html#l00235">n_nz</a>, <a class="el" href="sparsity__pattern_8h_source.html#l00237">n_oz</a>, <a class="el" href="sparsity__pattern_8h_source.html#l00206">need_full_sparsity_pattern</a>, <a class="el" href="sparsity__pattern_8h_source.html#l00233">nonlocal_pattern</a> , 以及 <a class="el" href="sparsity__pattern_8h_source.html#l00231">sparsity_pattern</a>.</p>
<div class="fragment"><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;{</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  parallel_object_only();</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  libmesh_assert(this-&gt;comm().verify(<a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af61ba6f3d2d45a3cfacb0d32b4bfe428">need_full_sparsity_pattern</a>));</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <span class="keyword">auto</span> &amp; comm = this-&gt;comm();</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <span class="keyword">auto</span> my_pid = comm.rank();</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> n_global_dofs   = <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">dof_map</a>.<a class="code" href="classlibMesh_1_1DofMap.html#a77f8d984574b1bf8886057799e9b0134">n_dofs</a>();</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> n_dofs_on_proc  = <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">dof_map</a>.<a class="code" href="classlibMesh_1_1DofMap.html#a765ac72717810e0a86f04ab8a938cd22">n_dofs_on_processor</a>(my_pid);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> local_first_dof = <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">dof_map</a>.<a class="code" href="classlibMesh_1_1DofMap.html#a2cc5678707a3bcb0f64b1cb5c73c813c">first_dof</a>();</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> local_end_dof   = <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">dof_map</a>.<a class="code" href="classlibMesh_1_1DofMap.html#a265de993749f5bab70c3f9c860defd49">end_dof</a>();</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <span class="comment">// The data to send</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  std::map&lt;processor_id_type, std::vector&lt;dof_id_type&gt;&gt; ids_to_send;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  std::map&lt;processor_id_type, std::vector&lt;Row&gt;&gt; rows_to_send;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  <span class="comment">// Loop over the nonlocal rows and transform them into the new datastructure</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  NonlocalGraph::iterator it = <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#ae9a6ba8ebda480adf92983c4a7d0711c">nonlocal_pattern</a>.begin();</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <span class="keywordflow">while</span> (it != <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#ae9a6ba8ebda480adf92983c4a7d0711c">nonlocal_pattern</a>.end())</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> dof_id = it-&gt;first;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keyword">auto</span> &amp; row = it-&gt;second;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <a class="code" href="namespacelibMesh.html#af18245d4f872c36a41fc74086bda3e80">processor_id_type</a> proc_id = 0;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordflow">while</span> (dof_id &gt;= <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">dof_map</a>.<a class="code" href="classlibMesh_1_1DofMap.html#a265de993749f5bab70c3f9c860defd49">end_dof</a>(proc_id))</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      proc_id++;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    ids_to_send[proc_id].push_back(dof_id);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="comment">// Note this invalidates the data in nonlocal_pattern</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    rows_to_send[proc_id].push_back(std::move(row));</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="comment">// Might as well remove it since it&#39;s invalidated anyway</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    it = <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#ae9a6ba8ebda480adf92983c4a7d0711c">nonlocal_pattern</a>.erase(it);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  }</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  std::map&lt;processor_id_type, std::vector&lt;dof_id_type&gt;&gt; received_ids_map;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <span class="keyword">auto</span> ids_action_functor =</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    [&amp; received_ids_map]</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    (<a class="code" href="namespacelibMesh.html#af18245d4f872c36a41fc74086bda3e80">processor_id_type</a> pid,</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;     <span class="keyword">const</span> std::vector&lt;dof_id_type&gt; &amp; received_ids)</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    {</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      received_ids_map.emplace(pid, received_ids);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    };</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  Parallel::push_parallel_vector_data(this-&gt;comm(), ids_to_send,</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                                      ids_action_functor);</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <span class="keyword">auto</span> rows_action_functor =</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    [<span class="keyword">this</span>,</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;     &amp; received_ids_map,</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;     n_global_dofs,</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;     n_dofs_on_proc,</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;     local_first_dof,</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;     local_end_dof]</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    (<a class="code" href="namespacelibMesh.html#af18245d4f872c36a41fc74086bda3e80">processor_id_type</a> pid,</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;     <span class="keyword">const</span> std::vector&lt;Row&gt; &amp; received_rows)</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    {</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      <span class="keyword">const</span> std::vector&lt;dof_id_type&gt; &amp; received_ids = libmesh_map_find(received_ids_map, pid);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      std::size_t n_rows = received_rows.size();</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      libmesh_assert_equal_to(n_rows, received_ids.size());</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> i : IntRange&lt;std::size_t&gt;(0, n_rows))</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        {</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;          <span class="keyword">const</span> <span class="keyword">auto</span> r = received_ids[i];</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;          libmesh_assert(<a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">dof_map</a>.<a class="code" href="classlibMesh_1_1DofMap.html#ab6d9ab04643e9028f7f0c9b4d18e0455">local_index</a>(r));</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;          <span class="keyword">const</span> <span class="keyword">auto</span> my_r = r - local_first_dof;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;          <span class="keyword">auto</span> &amp; their_row = received_rows[i];</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af61ba6f3d2d45a3cfacb0d32b4bfe428">need_full_sparsity_pattern</a>)</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;            {</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;              <span class="keyword">auto</span> &amp; my_row = <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#a054aa3bf4ab1ff21352e2aaf2495c589">sparsity_pattern</a>[my_r];</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;              <span class="comment">// They wouldn&#39;t have sent an empty row</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;              libmesh_assert(!their_row.empty());</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;              <span class="comment">// We can end up with an empty row on a dof that touches our</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;              <span class="comment">// inactive elements but not our active ones</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;              <span class="keywordflow">if</span> (my_row.empty())</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;              {</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                my_row.assign (their_row.begin(), their_row.end());</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;              }</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;              <span class="keywordflow">else</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;              {</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                my_row.insert (my_row.end(),</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                               their_row.begin(),</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                               their_row.end());</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                <span class="comment">// We cannot use SparsityPattern::sort_row() here because it expects</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                <span class="comment">// the [begin,middle) [middle,end) to be non-overlapping.  This is not</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                <span class="comment">// necessarily the case here, so use std::sort()</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                std::sort (my_row.begin(), my_row.end());</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                my_row.erase(std::unique (my_row.begin(), my_row.end()), my_row.end());</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;              }</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;              <span class="comment">// fix the number of on and off-processor nonzeros in this row</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;              <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#abd98a4e05536e03e6d1281c8ceee0f7d">n_nz</a>[my_r] = <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af7805e48c78b15d9df8c618dd593a3bb">n_oz</a>[my_r] = 0;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;              <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp; df : my_row)</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                <span class="keywordflow">if</span> ((df &lt; local_first_dof) || (df &gt;= local_end_dof))</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                  <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af7805e48c78b15d9df8c618dd593a3bb">n_oz</a>[my_r]++;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                  <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#abd98a4e05536e03e6d1281c8ceee0f7d">n_nz</a>[my_r]++;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            }</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;            {</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;              <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp; df : their_row)</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                <span class="keywordflow">if</span> ((df &lt; local_first_dof) || (df &gt;= local_end_dof))</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                  <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af7805e48c78b15d9df8c618dd593a3bb">n_oz</a>[my_r]++;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                  <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#abd98a4e05536e03e6d1281c8ceee0f7d">n_nz</a>[my_r]++;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;              <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#abd98a4e05536e03e6d1281c8ceee0f7d">n_nz</a>[my_r] = std::min(<a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#abd98a4e05536e03e6d1281c8ceee0f7d">n_nz</a>[my_r], n_dofs_on_proc);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;              <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af7805e48c78b15d9df8c618dd593a3bb">n_oz</a>[my_r] = std::min(<a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#af7805e48c78b15d9df8c618dd593a3bb">n_oz</a>[my_r],</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                                    static_cast&lt;dof_id_type&gt;(n_global_dofs-<a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#abd98a4e05536e03e6d1281c8ceee0f7d">n_nz</a>[my_r]));</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;            }</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        }</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    };</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  Parallel::push_parallel_vector_data(this-&gt;comm(), rows_to_send,</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                                      rows_action_functor);</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <span class="comment">// We should have sent everything at this point.</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  libmesh_assert (<a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#ae9a6ba8ebda480adf92983c4a7d0711c">nonlocal_pattern</a>.empty());</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;}</div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_a054aa3bf4ab1ff21352e2aaf2495c589"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#a054aa3bf4ab1ff21352e2aaf2495c589">libMesh::SparsityPattern::Build::sparsity_pattern</a></div><div class="ttdeci">SparsityPattern::Graph sparsity_pattern</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00231">sparsity_pattern.h:231</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_af61ba6f3d2d45a3cfacb0d32b4bfe428"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#af61ba6f3d2d45a3cfacb0d32b4bfe428">libMesh::SparsityPattern::Build::need_full_sparsity_pattern</a></div><div class="ttdeci">const bool need_full_sparsity_pattern</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00206">sparsity_pattern.h:206</a></div></div>
<div class="ttc" id="classlibMesh_1_1DofMap_html_ab6d9ab04643e9028f7f0c9b4d18e0455"><div class="ttname"><a href="classlibMesh_1_1DofMap.html#ab6d9ab04643e9028f7f0c9b4d18e0455">libMesh::DofMap::local_index</a></div><div class="ttdeci">bool local_index(dof_id_type dof_index) const </div><div class="ttdef"><b>Definition:</b> <a href="dof__map_8h_source.html#l00831">dof_map.h:831</a></div></div>
<div class="ttc" id="classlibMesh_1_1DofMap_html_a77f8d984574b1bf8886057799e9b0134"><div class="ttname"><a href="classlibMesh_1_1DofMap.html#a77f8d984574b1bf8886057799e9b0134">libMesh::DofMap::n_dofs</a></div><div class="ttdeci">dof_id_type n_dofs() const </div><div class="ttdef"><b>Definition:</b> <a href="dof__map_8h_source.html#l00659">dof_map.h:659</a></div></div>
<div class="ttc" id="namespacelibMesh_html_af18245d4f872c36a41fc74086bda3e80"><div class="ttname"><a href="namespacelibMesh.html#af18245d4f872c36a41fc74086bda3e80">libMesh::processor_id_type</a></div><div class="ttdeci">uint8_t processor_id_type</div><div class="ttdef"><b>Definition:</b> <a href="id__types_8h_source.html#l00104">id_types.h:104</a></div></div>
<div class="ttc" id="classlibMesh_1_1DofMap_html_a765ac72717810e0a86f04ab8a938cd22"><div class="ttname"><a href="classlibMesh_1_1DofMap.html#a765ac72717810e0a86f04ab8a938cd22">libMesh::DofMap::n_dofs_on_processor</a></div><div class="ttdeci">dof_id_type n_dofs_on_processor(const processor_id_type proc) const </div><div class="ttdef"><b>Definition:</b> <a href="dof__map_8h_source.html#l00675">dof_map.h:675</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_adaaeb1039af971d4376bcd896686a281"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">libMesh::SparsityPattern::Build::dof_map</a></div><div class="ttdeci">const DofMap &amp; dof_map</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00202">sparsity_pattern.h:202</a></div></div>
<div class="ttc" id="classlibMesh_1_1DofMap_html_a2cc5678707a3bcb0f64b1cb5c73c813c"><div class="ttname"><a href="classlibMesh_1_1DofMap.html#a2cc5678707a3bcb0f64b1cb5c73c813c">libMesh::DofMap::first_dof</a></div><div class="ttdeci">dof_id_type first_dof(const processor_id_type proc) const </div><div class="ttdef"><b>Definition:</b> <a href="dof__map_8h_source.html#l00684">dof_map.h:684</a></div></div>
<div class="ttc" id="classlibMesh_1_1DofMap_html_a265de993749f5bab70c3f9c860defd49"><div class="ttname"><a href="classlibMesh_1_1DofMap.html#a265de993749f5bab70c3f9c860defd49">libMesh::DofMap::end_dof</a></div><div class="ttdeci">dof_id_type end_dof(const processor_id_type proc) const </div><div class="ttdef"><b>Definition:</b> <a href="dof__map_8h_source.html#l00708">dof_map.h:708</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_abd98a4e05536e03e6d1281c8ceee0f7d"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#abd98a4e05536e03e6d1281c8ceee0f7d">libMesh::SparsityPattern::Build::n_nz</a></div><div class="ttdeci">std::vector&lt; dof_id_type &gt; n_nz</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00235">sparsity_pattern.h:235</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_ae9a6ba8ebda480adf92983c4a7d0711c"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#ae9a6ba8ebda480adf92983c4a7d0711c">libMesh::SparsityPattern::Build::nonlocal_pattern</a></div><div class="ttdeci">SparsityPattern::NonlocalGraph nonlocal_pattern</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00233">sparsity_pattern.h:233</a></div></div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_af7805e48c78b15d9df8c618dd593a3bb"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#af7805e48c78b15d9df8c618dd593a3bb">libMesh::SparsityPattern::Build::n_oz</a></div><div class="ttdeci">std::vector&lt; dof_id_type &gt; n_oz</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00237">sparsity_pattern.h:237</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af6a369d62cc83a1003e315cf178c9daa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void libMesh::SparsityPattern::Build::sorted_connected_dofs </td>
          <td>(</td>
          <td class="paramtype">const Elem *&#160;</td>
          <td class="paramname"><em>elem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>dofs_vi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>vi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>在文件 <a class="el" href="sparsity__pattern_8C_source.html">sparsity_pattern.C</a> 第 <a class="el" href="sparsity__pattern_8C_source.html#l00092">92</a> 行定义.</p>

<p>参考 <a class="el" href="dof__map_8C_source.html#l01992">libMesh::DofMap::dof_indices()</a>, <a class="el" href="sparsity__pattern_8h_source.html#l00202">dof_map</a> , 以及 <a class="el" href="dof__map_8C_source.html#l02852">libMesh::DofMap::find_connected_dofs()</a>.</p>

<p>参考自 <a class="el" href="sparsity__pattern_8C_source.html#l00238">operator()()</a>.</p>
<div class="fragment"><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;{</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">dof_map</a>.<a class="code" href="classlibMesh_1_1DofMap.html#a0d323b6fcb736454a9f6074ebda9ec28">dof_indices</a> (elem, dofs_vi, vi);</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="preprocessor">#ifdef LIBMESH_ENABLE_CONSTRAINTS</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="preprocessor"></span>  <a class="code" href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">dof_map</a>.<a class="code" href="classlibMesh_1_1DofMap.html#a3894dde74bae40ba948e3be6656bfb72">find_connected_dofs</a> (dofs_vi);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="preprocessor"></span>  <span class="comment">// We can be more efficient if we sort the element DOFs into</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="comment">// increasing order</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  std::sort(dofs_vi.begin(), dofs_vi.end());</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="comment">// Handle cases where duplicate nodes are intentionally assigned to</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="comment">// a single element.</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  dofs_vi.erase(std::unique(dofs_vi.begin(), dofs_vi.end()), dofs_vi.end());</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;}</div>
<div class="ttc" id="classlibMesh_1_1SparsityPattern_1_1Build_html_adaaeb1039af971d4376bcd896686a281"><div class="ttname"><a href="classlibMesh_1_1SparsityPattern_1_1Build.html#adaaeb1039af971d4376bcd896686a281">libMesh::SparsityPattern::Build::dof_map</a></div><div class="ttdeci">const DofMap &amp; dof_map</div><div class="ttdef"><b>Definition:</b> <a href="sparsity__pattern_8h_source.html#l00202">sparsity_pattern.h:202</a></div></div>
<div class="ttc" id="classlibMesh_1_1DofMap_html_a3894dde74bae40ba948e3be6656bfb72"><div class="ttname"><a href="classlibMesh_1_1DofMap.html#a3894dde74bae40ba948e3be6656bfb72">libMesh::DofMap::find_connected_dofs</a></div><div class="ttdeci">void find_connected_dofs(std::vector&lt; dof_id_type &gt; &amp;elem_dofs) const </div><div class="ttdoc">Finds all the DOFS associated with the element DOFs elem_dofs. </div><div class="ttdef"><b>Definition:</b> <a href="dof__map_8C_source.html#l02852">dof_map.C:2852</a></div></div>
<div class="ttc" id="classlibMesh_1_1DofMap_html_a0d323b6fcb736454a9f6074ebda9ec28"><div class="ttname"><a href="classlibMesh_1_1DofMap.html#a0d323b6fcb736454a9f6074ebda9ec28">libMesh::DofMap::dof_indices</a></div><div class="ttdeci">void dof_indices(const Elem *const elem, std::vector&lt; dof_id_type &gt; &amp;di) const </div><div class="ttdoc">Fills the vector di with the global degree of freedom indices for the element. </div><div class="ttdef"><b>Definition:</b> <a href="dof__map_8C_source.html#l01992">dof_map.C:1992</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">类成员变量说明</h2>
<a class="anchor" id="a94ab4956b00a065363ff5b52f447c754"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const bool libMesh::SparsityPattern::Build::calculate_constrained</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>在文件 <a class="el" href="sparsity__pattern_8h_source.html">sparsity_pattern.h</a> 第 <a class="el" href="sparsity__pattern_8h_source.html#l00207">207</a> 行定义.</p>

</div>
</div>
<a class="anchor" id="a7b7e6659e67ebde9374eafc99f4eaf42"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::set&lt;GhostingFunctor *&gt;&amp; libMesh::SparsityPattern::Build::coupling_functors</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>在文件 <a class="el" href="sparsity__pattern_8h_source.html">sparsity_pattern.h</a> 第 <a class="el" href="sparsity__pattern_8h_source.html#l00204">204</a> 行定义.</p>

</div>
</div>
<a class="anchor" id="a7e288ac68552ad57f0b56c9feff455b2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const CouplingMatrix* libMesh::SparsityPattern::Build::dof_coupling</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>在文件 <a class="el" href="sparsity__pattern_8h_source.html">sparsity_pattern.h</a> 第 <a class="el" href="sparsity__pattern_8h_source.html#l00203">203</a> 行定义.</p>

</div>
</div>
<a class="anchor" id="adaaeb1039af971d4376bcd896686a281"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classlibMesh_1_1DofMap.html">DofMap</a>&amp; libMesh::SparsityPattern::Build::dof_map</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>在文件 <a class="el" href="sparsity__pattern_8h_source.html">sparsity_pattern.h</a> 第 <a class="el" href="sparsity__pattern_8h_source.html#l00202">202</a> 行定义.</p>

<p>参考自 <a class="el" href="sparsity__pattern_8C_source.html#l00111">handle_vi_vj()</a>, <a class="el" href="sparsity__pattern_8C_source.html#l00363">join()</a>, <a class="el" href="sparsity__pattern_8C_source.html#l00238">operator()()</a>, <a class="el" href="sparsity__pattern_8C_source.html#l00469">parallel_sync()</a> , 以及 <a class="el" href="sparsity__pattern_8C_source.html#l00092">sorted_connected_dofs()</a>.</p>

</div>
</div>
<a class="anchor" id="a2fb9ad8334bf9313a8ad9231e64724f2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_set&lt;<a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a>&gt; libMesh::SparsityPattern::Build::hashed_dof_sets</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>在文件 <a class="el" href="sparsity__pattern_8h_source.html">sparsity_pattern.h</a> 第 <a class="el" href="sparsity__pattern_8h_source.html#l00218">218</a> 行定义.</p>

<p>参考自 <a class="el" href="sparsity__pattern_8C_source.html#l00111">handle_vi_vj()</a> , 以及 <a class="el" href="sparsity__pattern_8C_source.html#l00363">join()</a>.</p>

</div>
</div>
<a class="anchor" id="a65ae2307529ece863ce1092155185762"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const bool libMesh::SparsityPattern::Build::implicit_neighbor_dofs</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>在文件 <a class="el" href="sparsity__pattern_8h_source.html">sparsity_pattern.h</a> 第 <a class="el" href="sparsity__pattern_8h_source.html#l00205">205</a> 行定义.</p>

</div>
</div>
<a class="anchor" id="abd98a4e05536e03e6d1281c8ceee0f7d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a>&gt; libMesh::SparsityPattern::Build::n_nz</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>在文件 <a class="el" href="sparsity__pattern_8h_source.html">sparsity_pattern.h</a> 第 <a class="el" href="sparsity__pattern_8h_source.html#l00235">235</a> 行定义.</p>

<p>参考自 <a class="el" href="sparsity__pattern_8C_source.html#l00602">apply_extra_sparsity_object()</a>, <a class="el" href="sparsity__pattern_8h_source.html#l00165">get_n_nz()</a>, <a class="el" href="sparsity__pattern_8C_source.html#l00363">join()</a>, <a class="el" href="sparsity__pattern_8C_source.html#l00238">operator()()</a> , 以及 <a class="el" href="sparsity__pattern_8C_source.html#l00469">parallel_sync()</a>.</p>

</div>
</div>
<a class="anchor" id="af7805e48c78b15d9df8c618dd593a3bb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a>&gt; libMesh::SparsityPattern::Build::n_oz</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>在文件 <a class="el" href="sparsity__pattern_8h_source.html">sparsity_pattern.h</a> 第 <a class="el" href="sparsity__pattern_8h_source.html#l00237">237</a> 行定义.</p>

<p>参考自 <a class="el" href="sparsity__pattern_8C_source.html#l00602">apply_extra_sparsity_object()</a>, <a class="el" href="sparsity__pattern_8h_source.html#l00172">get_n_oz()</a>, <a class="el" href="sparsity__pattern_8C_source.html#l00363">join()</a>, <a class="el" href="sparsity__pattern_8C_source.html#l00238">operator()()</a> , 以及 <a class="el" href="sparsity__pattern_8C_source.html#l00469">parallel_sync()</a>.</p>

</div>
</div>
<a class="anchor" id="af61ba6f3d2d45a3cfacb0d32b4bfe428"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const bool libMesh::SparsityPattern::Build::need_full_sparsity_pattern</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>在文件 <a class="el" href="sparsity__pattern_8h_source.html">sparsity_pattern.h</a> 第 <a class="el" href="sparsity__pattern_8h_source.html#l00206">206</a> 行定义.</p>

<p>参考自 <a class="el" href="sparsity__pattern_8C_source.html#l00363">join()</a>, <a class="el" href="sparsity__pattern_8C_source.html#l00238">operator()()</a> , 以及 <a class="el" href="sparsity__pattern_8C_source.html#l00469">parallel_sync()</a>.</p>

</div>
</div>
<a class="anchor" id="ae9a6ba8ebda480adf92983c4a7d0711c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1NonlocalGraph.html">SparsityPattern::NonlocalGraph</a> libMesh::SparsityPattern::Build::nonlocal_pattern</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>在文件 <a class="el" href="sparsity__pattern_8h_source.html">sparsity_pattern.h</a> 第 <a class="el" href="sparsity__pattern_8h_source.html#l00233">233</a> 行定义.</p>

<p>参考自 <a class="el" href="sparsity__pattern_8h_source.html#l00195">clear_full_sparsity()</a>, <a class="el" href="sparsity__pattern_8h_source.html#l00158">get_nonlocal_pattern()</a>, <a class="el" href="sparsity__pattern_8C_source.html#l00111">handle_vi_vj()</a>, <a class="el" href="sparsity__pattern_8C_source.html#l00363">join()</a> , 以及 <a class="el" href="sparsity__pattern_8C_source.html#l00469">parallel_sync()</a>.</p>

</div>
</div>
<a class="anchor" id="a054aa3bf4ab1ff21352e2aaf2495c589"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classlibMesh_1_1SparsityPattern_1_1Graph.html">SparsityPattern::Graph</a> libMesh::SparsityPattern::Build::sparsity_pattern</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>在文件 <a class="el" href="sparsity__pattern_8h_source.html">sparsity_pattern.h</a> 第 <a class="el" href="sparsity__pattern_8h_source.html#l00231">231</a> 行定义.</p>

<p>参考自 <a class="el" href="sparsity__pattern_8h_source.html#l00184">apply_extra_sparsity_function()</a>, <a class="el" href="sparsity__pattern_8C_source.html#l00602">apply_extra_sparsity_object()</a>, <a class="el" href="sparsity__pattern_8h_source.html#l00195">clear_full_sparsity()</a>, <a class="el" href="sparsity__pattern_8h_source.html#l00150">get_sparsity_pattern()</a>, <a class="el" href="sparsity__pattern_8C_source.html#l00111">handle_vi_vj()</a>, <a class="el" href="sparsity__pattern_8C_source.html#l00363">join()</a>, <a class="el" href="sparsity__pattern_8C_source.html#l00238">operator()()</a> , 以及 <a class="el" href="sparsity__pattern_8C_source.html#l00469">parallel_sync()</a>.</p>

</div>
</div>
<hr/>该类的文档由以下文件生成:<ul>
<li>/home/lwz/libmesh/include/base/<a class="el" href="sparsity__pattern_8h_source.html">sparsity_pattern.h</a></li>
<li>/home/lwz/libmesh/src/base/<a class="el" href="sparsity__pattern_8C_source.html">sparsity_pattern.C</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
生成于 2023年 十二月 20日 星期三 14:07:08 , 为 libmesh解析使用  &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
